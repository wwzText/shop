(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/poster/goods"],{"1f6e":function(e,t,o){"use strict";(function(e){o("aaea");n(o("66fd"));var t=n(o("d456"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},2940:function(e,t,o){"use strict";var n;o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return n}));var r=function(){var e=this,t=e.$createElement,o=(e._self._c,e.loadShow?e.__map(e.styleList,(function(t,o){var n=e.__get_orig(t),r=e.config.poster_style.indexOf(t.value.toString());return{$orig:n,g0:r}})):null),n=e.loadShow?e.__map(e.typesettingList,(function(t,o){var n=e.__get_orig(t),r=e.config.image_style.indexOf(t.value.toString());return{$orig:n,g1:r}})):null;e.$mp.data=Object.assign({},{$root:{l0:o,l1:n}})},i=[]},"2e6e":function(e,t,o){"use strict";o.r(t);var n=o("8c1d"),r=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},"86f6":function(e,t,o){"use strict";var n=o("9690"),r=o.n(n);r.a},"8c1d":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o("2f62");function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){c(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var a=function(){o.e("components/page-component/app-goods-poster/app-goods-poster-one").then(function(){return resolve(o("2400"))}.bind(null,o)).catch(o.oe)},s=function(){o.e("components/page-component/app-goods-poster/app-goods-poster-two").then(function(){return resolve(o("2ab8"))}.bind(null,o)).catch(o.oe)},l=function(){o.e("components/page-component/app-goods-poster/app-goods-poster-three").then(function(){return resolve(o("6876"))}.bind(null,o)).catch(o.oe)},u=function(){o.e("components/page-component/app-goods-poster/app-goods-poster-four").then(function(){return resolve(o("489a"))}.bind(null,o)).catch(o.oe)},p={name:"goods",components:{AppGoodsPosterOne:a,AppGoodsPosterTwo:s,AppGoodsPosterThree:l,AppGoodsPosterFour:u},data:function(){return{loadShow:!1,styleList:[{label:"样式一",value:1},{label:"样式二",value:2},{label:"样式三",value:3},{label:"样式四",value:4}],typesettingList:[{label:"1张图",value:1,pic_url:"../../static/image/poster/pic-one.png"},{label:"2张图",value:2,pic_url:"../../static/image/poster/pic-two.png"},{label:"3张图",value:3,pic_url:"../../static/image/poster/pic-three.png"},{label:"4张图",value:4,pic_url:"../../static/image/poster/pic-four.png"},{label:"5张图",value:5,pic_url:"../../static/image/poster/pic-five.png"}],typeList:[],colorList:[],selectForm:null,config:{color:[],image_style:[],poster_style:[]},multiple:0,info:{},posterConfig:"",posterGenerate:""}},onLoad:function(e){var t=e.poster_config,o=e.poster_generate;t&&o&&(this.posterConfig=unescape(t),this.posterGenerate=unescape(o),this.loadData())},methods:{calcMultiple:function(){var t=this,o=null;o=e.createSelectorQuery().in(this),o.select("#head").boundingClientRect((function(o){t.multiple=(o.height*(750/e.getSystemInfoSync().screenWidth)-24-24)/1334})).exec()},loadData:function(){var t=this;this.$request({url:this.posterConfig}).then((function(o){t.$hideLoading(),t.loadShow=!0;var n=o.code,r=o.data,i=o.msg;0===n?(t.config=r.config,t.info=r.info,t.typeList=[{label:"纯色",value:1},{label:"渐变",value:2}],t.selectForm={color:t.config["color"][0],style:t.config["poster_style"][0],typesetting:t.config["image_style"][0],type:1},setTimeout((function(){t.calcMultiple()}))):e.showToast({title:i,icon:"none"})}))},changeStyle:function(e){this.selectForm.style=e},changeTypeSetting:function(e){this.selectForm.typesetting=e},changeType:function(e){this.selectForm.type=e},changeColor:function(e){this.selectForm.color=e},submitSave:function(){var t=this;this.$showLoading({text:"生成中"}),this.$request({url:this.posterGenerate,data:this.selectForm}).then((function(o){t.$hideLoading();var n=o.code,r=o.data,i=o.msg;if(0===n){var c=r.pic_url;t.$utils.batchSave(c,"image").then((function(){e.showToast({title:"保存成功"})}))}else e.showToast({title:i,icon:"none"})})).catch((function(){t.$hideLoading()}))}},computed:i({},(0,n.mapGetters)("mallConfig",{getTheme:"getTheme"}))};t.default=p}).call(this,o("543d")["default"])},9690:function(e,t,o){},d456:function(e,t,o){"use strict";o.r(t);var n=o("2940"),r=o("2e6e");for(var i in r)"default"!==i&&function(e){o.d(t,e,(function(){return r[e]}))}(i);o("86f6");var c,a=o("f0c5"),s=Object(a["a"])(r["default"],n["b"],n["c"],!1,null,"7c3d1706",null,!1,n["a"],c);t["default"]=s.exports}},[["1f6e","common/runtime","common/vendor"]]]);