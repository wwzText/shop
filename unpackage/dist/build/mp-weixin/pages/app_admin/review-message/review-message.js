(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/app_admin/review-message/review-message"],{1470:function(t,e,r){"use strict";var i=r("ad5d"),n=r.n(i);n.a},4428:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(r("a34a")),n=r("2f62");function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e,r,i,n,o,s){try{var a=t[o](s),u=a.value}catch(c){return void r(c)}a.done?e(u):Promise.resolve(u).then(i,n)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function a(t){s(o,i,n,a,u,"next",t)}function u(t){s(o,i,n,a,u,"throw",t)}a(void 0)}))}}function u(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=f(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function c(t){return d(t)||h(t)||f(t)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t,e){if(t){if("string"===typeof t)return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}}function h(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function d(t){if(Array.isArray(t))return p(t)}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g={name:"review-message",data:function(){return{type:"share",first:!0,over:!1,titleShow:!1,showForm:!1,form:[],list:[],tab:[],getFocus:!1,keyword:"",searchBool:!1,modelType:1,reasonRefusal:"",setItem:{},titleWidth:"100%",model:!1,page:1}},computed:y({},(0,n.mapState)({windowHeight:function(t){return t.gConfig.systemInfo.windowHeight}})),onLoad:function(){this.$showLoading({type:"global",text:"加载中..."}),this.getTabs()},onShow:function(){var t=this;if(this.first)return!1;this.request({key:this.type,page:1,keyword:""}).then((function(e){e&&(t.list=e.list)}))},methods:{getMore:function(){var t=this;this.over||(this.page++,this.request({key:this.type,page:this.page,keyword:this.keyword}).then((function(e){e&&e.list.length>0?t.list=[].concat(c(t.list),c(e.list)):e&&0===e.list.length&&(t.over=!0)})))},imageLoad:function(t){this.form[t].loadOver=!1},look:function(e){t.previewImage({current:e,urls:[e]})},toggle:function(t){for(var e in this.form=t.form,this.form)if("img_upload"==this.form[e].key&&Array.isArray(this.form[e].value)){var r,i=!1,n=u(this.form[e].value);try{for(n.s();!(r=n.n()).done;){var o=r.value;""!=o&&(i=!0)}}catch(s){n.e(s)}finally{n.f()}i||this.form.splice(e,1)}this.showForm=!0},toUrl:function(e){if("region"==this.type||"community"==this.type||"mch"==this.type){var r="/pages/app_admin/"+this.type+"-detail/"+this.type+"-detail?id=";"region"==this.type&&(r+=e.id+"&name="+e.nickname),"mch"==this.type&&(r+=e.id),"community"==this.type&&(r+=e.user_id),t.navigateTo({url:r})}},tabSwitch:function(t){var e=this;this.list=[],this.type=t,this.request({key:t,page:1,keyword:""}).then((function(t){t&&(e.list=t.list)}))},getTabs:function(){var e=this,r=this;r.$request({url:r.$api.app_admin.tabs_v2,method:"get"}).then((function(i){r.$hideLoading(),t.hideLoading(),0==i.code?(r.tab=i.data,1==r.tab.length?t.setNavigationBarTitle({title:r.tab[0].plugin+"审核消息"}):r.titleShow=!0,r.titleWidth=1/r.tab.length*100+"%",r.type=i.data[0].key,r.request({key:i.data[0].key,page:1,keyword:""}).then((function(t){e.first=!1,t&&(r.list=t.list)}))):t.showToast({title:i.msg,icon:"none",duration:1e3})}))},blurFocus:function(){var t=this;setTimeout((function(e){t.getFocus=!1,t.searchText()}),300)},clearSearch:function(){var t=this;t.keyword="",t.searchBool=!1},changeType:function(t){var e=this;this.list=[],this.page=1,this.type=t,this.over=!1,this.keyword="",this.searchBool=!1,this.request({key:t,page:this.page,keyword:this.keyword}).then((function(t){t&&(e.list=t.list)}))},request:function(e){var r=this;return a(i.default.mark((function n(){var o,s,a,u;return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o=e.key,s=e.page,a=e.keyword,i.next=3,r.$request({url:r.$api.app_admin.review_v2,data:{key:o,page:s,keyword:a}});case 3:if(u=i.sent,0!==u.code){i.next=8;break}return i.abrupt("return",u.data);case 8:return t.showToast({title:u.msg,icon:"none",duration:1e3}),i.abrupt("return",!1);case 10:case"end":return i.stop()}}),n)})))()},checkQueue:function(t){var e=this;this.$request({url:this.$api.app_admin.queue,data:{queue_id:t}}).then((function(r){if(r.retry&&1==r.retry)e.checkQueue(t);else for(var i=0;i<e.list.length;i++)e.list[i].id===e.setItem.id&&(e.$delete(e.list,i),e.model=!1,e.setItem={})}))},searchText:function(){var t=this;""===this.keyword&&(this.searchBool=!1),this.page=1,this.over=!1,this.request({key:this.type,page:this.page,keyword:this.keyword}).then((function(e){e&&(t.list=e.list)}))},refuse:function(t){this.setItem=t,this.modelType=1,this.model=!0},by:function(t){this.setItem=t,this.modelType=2,this.model=!0},confirm:function(){var e=this;2===this.modelType?this.$request({url:this.$api.app_admin.review_switch_v2,method:"post",data:{key:this.type,status:1,form:JSON.stringify(this.setItem),user_id:this.setItem.user_id}}).then((function(t){if(0===t.code)if(3==e.type)e.checkQueue(t.data.queue_id);else for(var r=0;r<e.list.length;r++)e.list[r].id===e.setItem.id&&(e.$delete(e.list,r),e.model=!1,e.setItem={})})):1===this.modelType&&(this.setItem.review_remark=this.reasonRefusal,this.$request({url:this.$api.app_admin.review_switch_v2,method:"post",data:{key:this.type,status:2,form:JSON.stringify(this.setItem),reason:this.reasonRefusal,user_id:this.setItem.user_id}}).then((function(r){if(0===r.code){e.reasonRefusal="";for(var i=0;i<e.list.length;i++)e.list[i].id===e.setItem.id&&(e.$delete(e.list,i),e.model=!1,e.setItem={})}else t.showToast({title:r.msg,icon:"none",duration:1e3})})))},cancel:function(){this.model=!1,this.form=[],this.showForm=!1,this.setItem={}}}};e.default=g}).call(this,r("543d")["default"])},"46d9":function(t,e,r){"use strict";r.r(e);var i=r("4428"),n=r.n(i);for(var o in i)"default"!==o&&function(t){r.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"4e70":function(t,e,r){"use strict";var i;r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,r=(t._self._c,t.showForm?t.__map(t.form,(function(e,r){var i=t.__get_orig(e),n=e.value&&"img_upload"==e.key?Array.isArray(e.value):null;return{$orig:i,g0:n}})):null);t._isMounted||(t.e0=function(e){t.searchBool=!0},t.e1=function(e){t.getFocus=!0}),t.$mp.data=Object.assign({},{$root:{l0:r}})},o=[]},a24a:function(t,e,r){"use strict";(function(t){r("b8bc");i(r("66fd"));var e=i(r("b34d"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,r("543d")["createPage"])},ad5d:function(t,e,r){},b34d:function(t,e,r){"use strict";r.r(e);var i=r("4e70"),n=r("46d9");for(var o in n)"default"!==o&&function(t){r.d(e,t,(function(){return n[t]}))}(o);r("1470");var s,a=r("f0c5"),u=Object(a["a"])(n["default"],i["b"],i["c"],!1,null,"5e5d02d8",null,!1,i["a"],s);e["default"]=u.exports}},[["a24a","common/runtime","common/vendor"]]]);