(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/cats/cats"],{1379:function(t,e,i){"use strict";i.r(e);var a=i("3fd3"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"3a0d":function(t,e,i){"use strict";i.r(e);var a=i("6685"),s=i("1379");for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("7def");var o,c=i("f0c5"),r=Object(c["a"])(s["default"],a["b"],a["c"],!1,null,"d76810b6",null,!1,a["a"],o);e["default"]=r.exports},"3fd3":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(i("a34a")),s=i("2f62"),n=o(i("fae1"));function o(t){return t&&t.__esModule?t:{default:t}}function c(t,e,i,a,s,n,o){try{var c=t[n](o),r=c.value}catch(l){return void i(l)}c.done?e(r):Promise.resolve(r).then(a,s)}function r(t){return function(){var e=this,i=arguments;return new Promise((function(a,s){var n=t.apply(e,i);function o(t){c(n,a,s,o,r,"next",t)}function r(t){c(n,a,s,o,r,"throw",t)}o(void 0)}))}}function l(t){return f(t)||h(t)||u(t)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"===typeof t)return _(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_(t,e):void 0}}function h(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function f(t){if(Array.isArray(t))return _(t)}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function g(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?g(Object(i),!0).forEach((function(e){v(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var b=function(){i.e("pages/cats/style-one").then(function(){return resolve(i("1b749"))}.bind(null,i)).catch(i.oe)},y=function(){i.e("pages/cats/style-two").then(function(){return resolve(i("da7f"))}.bind(null,i)).catch(i.oe)},m=function(){i.e("pages/cats/style-three").then(function(){return resolve(i("49ff"))}.bind(null,i)).catch(i.oe)},w=function(){i.e("pages/cats/style-four").then(function(){return resolve(i("12f5"))}.bind(null,i)).catch(i.oe)},x=function(){i.e("pages/cats/style-five").then(function(){return resolve(i("fc1c"))}.bind(null,i)).catch(i.oe)},$=function(){i.e("pages/cats/style-six").then(function(){return resolve(i("a8ea"))}.bind(null,i)).catch(i.oe)},k=function(){i.e("pages/cats/style-seven").then(function(){return resolve(i("9bb0"))}.bind(null,i)).catch(i.oe)},O=function(){i.e("pages/cats/style-eight").then(function(){return resolve(i("413e"))}.bind(null,i)).catch(i.oe)},q=function(){i.e("pages/cats/style-nine").then(function(){return resolve(i("f205"))}.bind(null,i)).catch(i.oe)},I=function(){i.e("pages/cats/style-ten").then(function(){return resolve(i("4191"))}.bind(null,i)).catch(i.oe)},j=function(){i.e("pages/cats/style-eleven").then(function(){return resolve(i("4b07"))}.bind(null,i)).catch(i.oe)},S=function(){i.e("components/page-component/app-search-for/app-search-for").then(function(){return resolve(i("85d0"))}.bind(null,i)).catch(i.oe)},T=function(){i.e("components/page-component/app-attr/app-attr").then(function(){return resolve(i("0e1c"))}.bind(null,i)).catch(i.oe)},P={components:{"app-search-for":S,"style-one":b,"style-two":y,"style-three":m,"style-four":w,"style-five":x,"style-six":$,"style-seven":k,"style-eight":O,"style-nine":q,"style-ten":I,"style-eleven":j,"app-attr":T},data:function(){return{search_bool:!0,list:[],goods:[],request:!0,page:1,classId:0,activeIndex:0,activeIndexTwo:0,over:!1,scrollHeight:0,tabbarbool:!0,cat_id:0,cat_ids:[],againLower:!0,goods_list:[],page_count:1,select_cat_id:0,first_id:0,loading:!1,selectAttr:{},previewUrl:"",submitUrl:"",show:0,attrGroup:[],item:{},is_over_goods:!0,options:{},goodsLoading:!1}},computed:p(p(p(p(p({},(0,s.mapGetters)("mallConfig",{cat_style:"getCatStyle",getTheme:"getTheme"})),(0,s.mapState)("gConfig",{windowHeight:function(t){return t.systemInfo.windowHeight},windowWidth:function(t){return t.systemInfo.windowWidth}})),(0,s.mapGetters)("iPhoneX",{botHeight:"getBotHeight"})),(0,s.mapState)("mallConfig",{mall:function(t){return t.mall}})),{},{setHeight:function(){var t=0;return this.tabbarbool&&(t=this.botHeight),this.windowHeight*(750/this.windowWidth)-t-88}}),onReachBottom:function(){var e=this;"3"!==this.cat_style.cat_style&&"1"!==this.cat_style.cat_style&&(this.page<this.page_count?(this.page++,this.$request({url:this.$api.default.goods_list,method:"get",data:{page:this.page,cat_id:this.cat_id}}).then((function(t){var i;0===t.code&&("8"===e.cat_style.cat_style&&(e.goodsLoading=!0),(i=e.goods_list).push.apply(i,l(t.data.list)))}))):("8"===this.cat_style.cat_style&&(this.goodsLoading=!1),t.showToast({title:"暂无更多商品",icon:"none"})))},methods:{onAttr:function(t){this.selectAttr=t},attr:function(t,e,i,a){this.previewUrl=t,this.submitUrl=e,this.attrGroup=i,this.item=a,this.show=Math.random(),console.log(this.show)},route_advert:function(t){(0,n.default)({open_type:t.advert_open_type,params:t.advert_params,page_url:t.advert_url})},active:function(t){var e=this;this.page=1,this.goods_list=[],this.cat_id=t.id,this.select_cat_id=t.id;for(var i=0;i<this.list.length;i++)this.list[i].active!==t.active&&(this.list[i].active=!1),this.list[i].id===t.id&&(this.list[i].active=!0);this.is_over_goods=!1,this.$request({url:"".concat(this.$api.default.goods_list,"&page=").concat(this.page,"&cat_id=").concat(t.id)}).then((function(t){var i;0===t.code&&((i=e.goods_list).push.apply(i,l(t.data.list)),e.goodsLoading=!0,e.page_count=t.data.pagination.page_count,e.is_over_goods=!0)}))},req:function(){var t=this;this.$request({url:"".concat(this.$api.default.goods_list,"&page=").concat(this.page,"&cat_id=").concat(this.classId)}).then((function(e){var i;e.data.list.length>0?(i=t.goods).push.apply(i,l(e.data.list)):t.over=!0}))},activeOne:function(t){var e=this;this.page=1,this.activeIndexTwo=0,this.cat_id=t.id,this.select_cat_id=t.id,this.is_over_goods=!1;for(var i=0;i<this.list.length;i++)this.list[i].active!==t.active&&(this.list[i].active=!1),this.list[i].id===t.id&&(this.list[i].active=!0,this.activeIndex=i);"5"===this.cat_style.cat_style&&(this.goods_list=[]),0===this.list[this.activeIndex].child.length?this.$request({url:"".concat(this.$api.default.goods_list,"&page=").concat(this.page,"&cat_id=").concat(t.id)}).then((function(i){var a=i.data,s=a.list,n=a.pagination;e.goods_list=s,e.is_over_goods=!0,e.page=1,e.cat_id=t.id,e.select_cat_id=t.id,e.page_count=n.page_count})):this.$request({url:"".concat(this.$api.default.goods_list,"&page=").concat(this.page,"&cat_id=").concat(this.list[this.activeIndex].child[0].id)}).then((function(i){var a=i.data,s=a.list,n=a.pagination;e.goods_list=s,e.is_over_goods=!0,e.page=1,e.cat_id=e.list[e.activeIndex].child[0].id,e.select_cat_id=t.id,e.page_count=n.page_count}))},activeTwo:function(t,e){var i=this;return r(a.default.mark((function s(){var n,o,c,r;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i.page=1,i.activeIndexTwo=e,i.select_cat_id=t.id,i.cat_id=t.id,i.select_cat_id=t.id,i.is_over_goods=!1,a.next=8,i.$request({url:i.$api.default.goods_list,method:"get",data:{page:1,cat_id:t.id}});case 8:n=a.sent,0===n.code&&(o=n.data,c=o.list,r=o.pagination,i.goods_list=[],i.goods_list=c,i.is_over_goods=!0,i.page_count=r.page_count);case 10:case"end":return a.stop()}}),s)})))()},activeThree:function(t){this.cat_id=t.id,this.select_cat_id=t.id;for(var e=0;e<this.list.length;e++)this.list[e].active!==t.active&&(this.list[e].active=!1),this.list[e].id===t.id&&(this.list[e].active=!0,this.activeIndex=e)},catLower:function(){var t=this;return r(a.default.mark((function e(){var i,s,n,o;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.againLower){e.next=2;break}return e.abrupt("return");case 2:return t.againLower=!1,i=t.goods_list[t.goods_list.length-1],e.next=6,t.$request({url:t.$api.default.cat_goods,method:"get",data:{cat_ids:JSON.stringify(t.cat_ids),cat_id:i.id,offset:i.offset}});case 6:if(s=e.sent,0===s.code){for(s.data.list[0].id===i.id&&s.data.list[0].goods_list.length>0&&((n=t.goods_list[t.goods_list.length-1].goods_list).push.apply(n,l(s.data.list[0].goods_list)),t.goods_list[t.goods_list.length-1].offset=s.data.list[0].offset),o=1;o<s.data.list.length;o++)t.goods_list.push(s.data.list[o]);t.againLower=!0}case 8:case"end":return e.stop()}}),e)})))()},activeRequest:function(t){this.goods_list=[],0!==t.child.length&&this.requestCatList(t.child[0],0)},requestCatList:function(t,e){var i=this;return r(a.default.mark((function s(){var n,o;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i.page=1,i.cat_id=t.id,i.select_cat_id=t.id,i.activeIndexTwo=e,i.goods_list=[],0===t.child.length){a.next=13;break}for(i.is_over_goods=!1,i.cat_ids=[],n=0;n<t.child.length;n++)i.cat_ids.push(t.child[n].id);return a.next=11,i.$request({url:i.$api.default.cat_goods,method:"get",data:{cat_ids:JSON.stringify(i.cat_ids),cat_id:t.child[0].id,offset:0}});case 11:o=a.sent,0===o.code&&(i.is_over_goods=!0,i.goods_list=o.data.list);case 13:case"end":return a.stop()}}),s)})))()},requestGoods:function(t,e){var i=this;return r(a.default.mark((function s(){var n;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i.page=1,i.cat_id=t.id,i.select_cat_id=t.id,i.goods_list=[],i.is_over_goods=!1,"10"===i.cat_style.cat_style&&void 0!==e&&0!==i.list[e].child.length&&(i.activeIndexTwo=0,i.cat_id=i.list[e].child[0].id),a.next=8,i.$request({url:i.$api.default.goods_list,method:"get",data:{page:i.page,cat_id:i.cat_id}});case 8:n=a.sent,0===n.code&&(i.is_over_goods=!0,i.goods_list=n.data.list,i.goodsLoading=!0,i.page_count=n.data.pagination.page_count);case 10:case"end":return a.stop()}}),s)})))()},lower:function(e){var i=this;return r(a.default.mark((function s(){var n,o;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(i.page<i.page_count)){a.next=8;break}return i.page++,a.next=4,i.$request({url:i.$api.default.goods_list,method:"get",data:{page:i.page,cat_id:e.id}});case 4:n=a.sent,0===n.code&&(o=i.goods_list).push.apply(o,l(n.data.list)),a.next=9;break;case 8:t.showToast({title:"暂无更多商品",icon:"none"});case 9:case"end":return a.stop()}}),s)})))()},dataProcessing:function(t){for(var e=0;e<t.length;e+=2)e+1!==t.length?this.goods_list.push([t[e],t[e+1]]):this.goods_list.push([t[e]])},requestCat:function(t,e){var i=this;return r(a.default.mark((function s(){var n,o,c,r,l,d,u,h,f;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i.loading=!1,a.next=3,i.$request({url:i.$api.default.cat_list,method:"get",data:{cat_id:t||"",select_cat_id:e||""}});case 3:if(n=a.sent,0!==n.code){a.next=64;break}if(i.list=n.data.list,"1"!==i.cat_style.cat_style||0!==i.list.length){a.next=9;break}return i.search_bool=!1,a.abrupt("return");case 9:if("2"!==i.cat_style.cat_style&&"1"!==i.cat_style.cat_style){a.next=11;break}return a.abrupt("return");case 11:if("3"!==i.cat_style.cat_style||0!==i.list.length){a.next=14;break}return i.search_bool=!1,a.abrupt("return");case 14:if(!t&&!e){a.next=42;break}if("11"!==i.cat_style.cat_style){a.next=28;break}if(i.cat_ids=[],i.list.map((function(t,e){t.active&&(i.activeIndex=e)})),0!==i.list[i.activeIndex].child.length){a.next=20;break}return a.abrupt("return");case 20:for(o=0;o<i.list[i.activeIndex].child[0].child.length;o++)i.cat_ids.push(i.list[i.activeIndex].child[0].child[o].id);if(0!==i.cat_ids.length){a.next=23;break}return a.abrupt("return");case 23:return a.next=25,i.$request({url:i.$api.default.cat_goods,method:"get",data:{cat_ids:JSON.stringify(i.cat_ids),cat_id:i.cat_ids[0],offset:0}});case 25:return c=a.sent,0===c.code&&(i.goods_list=c.data.list),a.abrupt("return");case 28:if("6"!==i.cat_style.cat_style&&"7"!==i.cat_style.cat_style){a.next=31;break}return i.list.map((function(t,e){t.active&&(i.activeIndex=e)})),a.abrupt("return");case 31:if(i.list.length>0)for(r=0;r<i.list.length;r++)i.list[r].active&&(i.cat_id=i.list[r].id);if(("5"===i.cat_style.cat_style||"10"===i.cat_style.cat_style)&&i.list.length>0&&i.list[0].child.length>0)for(l=0;l<i.list.length;l++)i.list[l].active&&(i.cat_id=i.list[l].child[0].id);if(0!==i.list.length||"4"!==i.cat_style.cat_style){a.next=36;break}return i.search_bool=!1,a.abrupt("return");case 36:return a.next=38,i.$request({url:i.$api.default.goods_list,method:"get",data:{page:1,cat_id:i.cat_id}});case 38:d=a.sent,0===d.code&&(i.goods_list=d.data.list,i.page_count=d.data.pagination.page_count,0===i.list.length&&0===i.goods_list.length&&(i.search_bool=!1)),a.next=64;break;case 42:if(!(i.list.length>0)){a.next=63;break}if("11"!==i.cat_style.cat_style){a.next=55;break}if(i.cat_ids=[],0!==i.list.length&&0!==i.list[0].child.length){a.next=47;break}return a.abrupt("return");case 47:for(u=0;u<i.list[0].child[0].child.length;u++)i.cat_ids.push(i.list[0].child[0].child[u].id);if(0!==i.cat_ids.length){a.next=50;break}return a.abrupt("return");case 50:return a.next=52,i.$request({url:i.$api.default.cat_goods,method:"get",data:{cat_ids:JSON.stringify(i.cat_ids),cat_id:i.cat_ids[0],offset:0}});case 52:return h=a.sent,0===h.code&&(i.goods_list=h.data.list),a.abrupt("return");case 55:return i.cat_id=i.list[0].id,("5"===i.cat_style.cat_style||"10"===i.cat_style.cat_style)&&i.list[0].child.length>0&&(i.cat_id=i.list[0].child[0].id),a.next=59,i.$request({url:i.$api.default.goods_list,method:"get",data:{page:1,cat_id:i.cat_id}});case 59:f=a.sent,0===f.code&&(i.goods_list=f.data.list,i.page_count=f.data.pagination.page_count),a.next=64;break;case 63:i.search_bool=!1;case 64:case"end":return a.stop()}}),s)})))()}},onLoad:function(t){var e=this;this.options=t,setTimeout((function(){e.tabbarbool=e.$children[0].tabbarbool}),500),this.cat_id=t.cat_id,this.first_id=t.cat_id,t.first_id&&t.select_cat_id?this.requestCat(t.first_id,t.select_cat_id).then((function(){e.loading=!0})):!t.first_id&&t.select_cat_id?this.requestCat("",t.select_cat_id).then((function(){e.loading=!0})):t.first_id||t.select_cat_id||this.requestCat(t.cat_id).then((function(){e.loading=!0})),wx.showShareMenu({menus:["shareAppMessage","shareTimeline"]})},onShareAppMessage:function(){return this.$shareAppMessage({path:"/pages/cats/cats",title:this.$children[0].navigationBarTitle,params:{cat_id:this.first_id,first_id:this.first_id,select_cat_id:this.select_cat_id}})},onShareTimeline:function(){return this.$shareTimeline({title:this.mall.setting.share_title?this.mall.setting.share_title:this.mall.name,query:{cat_id:this.first_id,first_id:this.first_id,select_cat_id:this.select_cat_id}})}};e.default=P}).call(this,i("543d")["default"])},6685:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var s=function(){var t=this,e=t.$createElement;t._self._c},n=[]},"7def":function(t,e,i){"use strict";var a=i("f6f6"),s=i.n(a);s.a},"830b":function(t,e,i){"use strict";(function(t){i("b8bc");a(i("66fd"));var e=a(i("3a0d"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},f6f6:function(t,e,i){}},[["830b","common/runtime","common/vendor"]]]);