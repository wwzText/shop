(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["plugins/book/goods/goods"],{"2e84":function(e,n,o){"use strict";o.r(n);var t=o("58c5"),r=o.n(t);for(var c in t)"default"!==c&&function(e){o.d(n,e,(function(){return t[e]}))}(c);n["default"]=r.a},"52ce":function(e,n,o){},"58c5":function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=c(o("a34a")),r=o("2f62");function c(e){return e&&e.__esModule?e:{default:e}}function i(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function a(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?i(Object(o),!0).forEach((function(n){u(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function u(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function s(e,n){return g(e)||f(e,n)||p(e,n)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,n){if(e){if("string"===typeof e)return d(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?d(e,n):void 0}}function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var o=0,t=new Array(n);o<n;o++)t[o]=e[o];return t}function f(e,n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var o=[],t=!0,r=!1,c=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)if(o.push(i.value),n&&o.length===n)break}catch(u){r=!0,c=u}finally{try{t||null==a["return"]||a["return"]()}finally{if(r)throw c}}return o}}function g(e){if(Array.isArray(e))return e}function m(e,n,o,t,r,c,i){try{var a=e[c](i),u=a.value}catch(s){return void o(s)}a.done?n(u):Promise.resolve(u).then(t,r)}function h(e){return function(){var n=this,o=arguments;return new Promise((function(t,r){var c=e.apply(n,o);function i(e){m(c,t,r,i,a,"next",e)}function a(e){m(c,t,r,i,a,"throw",e)}i(void 0)}))}}var b=function(){o.e("components/page-component/goods/app-goods-banner").then(function(){return resolve(o("b169"))}.bind(null,o)).catch(o.oe)},v=function(){o.e("plugins/book/components/app-store").then(function(){return resolve(o("bf5a7"))}.bind(null,o)).catch(o.oe)},_=function(){o.e("components/page-component/app-related-suggestion-product/app-related-suggestion-product").then(function(){return resolve(o("3d12"))}.bind(null,o)).catch(o.oe)},y=function(){o.e("components/page-component/app-quick-navigation/app-quick-navigation").then(function(){return resolve(o("36d8"))}.bind(null,o)).catch(o.oe)},w=function(){o.e("components/page-component/goods/app-goods-service").then(function(){return resolve(o("49ac"))}.bind(null,o)).catch(o.oe)},k=function(){Promise.all([o.e("common/vendor"),o.e("components/page-component/app-vip-card/app-vip-card")]).then(function(){return resolve(o("63a9"))}.bind(null,o)).catch(o.oe)},O=function(){o.e("components/page-component/goods/app-goods-full-reduce").then(function(){return resolve(o("2069"))}.bind(null,o)).catch(o.oe)},j=function(){Promise.all([o.e("common/vendor"),o.e("components/page-component/goods/app-goods-coupon")]).then(function(){return resolve(o("4a6a"))}.bind(null,o)).catch(o.oe)},P=function(){o.e("components/page-component/goods/app-goods-marketing").then(function(){return resolve(o("0fed"))}.bind(null,o)).catch(o.oe)},$=function(){o.e("components/page-component/goods/u-attr").then(function(){return resolve(o("fae7"))}.bind(null,o)).catch(o.oe)},S=function(){o.e("components/page-component/goods/bd-info").then(function(){return resolve(o("3a59"))}.bind(null,o)).catch(o.oe)},C=function(){Promise.all([o.e("common/vendor"),o.e("components/page-component/goods/bd-coupon")]).then(function(){return resolve(o("cfa2"))}.bind(null,o)).catch(o.oe)},x=function(){o.e("components/page-component/goods/bd-xbc").then(function(){return resolve(o("abb7"))}.bind(null,o)).catch(o.oe)},A=function(){o.e("components/page-component/goods/bd-kb").then(function(){return resolve(o("7e79"))}.bind(null,o)).catch(o.oe)},I=function(){o.e("components/page-component/goods/bd-hc").then(function(){return resolve(o("ecb3"))}.bind(null,o)).catch(o.oe)},M=function(){o.e("components/page-component/goods/bd-detail").then(function(){return resolve(o("c91c"))}.bind(null,o)).catch(o.oe)},T=function(){o.e("components/page-component/goods/bd-comments").then(function(){return resolve(o("57fa"))}.bind(null,o)).catch(o.oe)},q=function(){o.e("components/basic-component/app-close/app-close").then(function(){return resolve(o("699f"))}.bind(null,o)).catch(o.oe)},U={name:"details",components:{"app-goods-banner":b,"app-store":v,"app-related-suggestion-product":_,"app-quick-navigation":y,"app-goods-service":w,"app-vip-card":k,appGoodsCoupon:j,"app-goods-marketing":P,uAttr:$,appClose:q,appGoodsFullReduce:O,bdInfo:S,bdCoupon:C,bdXbc:x,bdKb:A,bdHc:I,bdDetail:M,bdComments:T},data:function(){return{showClose:!1,is_open:0,item:{goods_activity:{full_reduce:{}}},full_reduce:null,selectAttr:{},activeIndex:0,list:[],url:"",cartShow:!1,is_vip:!1,is_vip_card_user:0,discount:null,goods_id:0,poster_config:this.$api.book.poster_config,poster_generate:this.$api.book.poster_generate,checked:null,show:!1,loading:!1,store:null,storeNum:null,services:null,name:null,goodsId:null,picUrl:null}},onShow:function(){var e=this;this.showClose=!1,setTimeout((function(){e.showClose=!0}))},onShareAppMessage:function(){var e=this.item,n=e.app_share_title,o=e.app_share_pic,t=e.goods_id,r=e.name;return this.$shareAppMessage({path:"/plugins/book/goods/goods",title:n||r,imageUrl:o||"",params:{goods_id:t}})},onShareTimeline:function(){var e=this.item,n=e.app_share_title,o=e.goods_id,t=e.name;return this.$shareTimeline({title:n||t,query:{goods_id:o}})},onLoad:function(e){this.goods_id=e.goods_id,this.request(e.goods_id),this.newRecommend(e.goods_id),wx.showShareMenu({menus:["shareAppMessage","shareTimeline"]})},methods:{getMall:function(e){this.is_open=e.is_open},check:function(e){this.checked=e},rightFunc:function(n){e.navigateTo({url:"/pages/order-submit/order-submit?mch_list=".concat(JSON.stringify([n]),"&preview_url=").concat(encodeURIComponent(this.$api.book.order_preview),"&submit_url=").concat(encodeURIComponent(this.$api.book.order_submit),"&plugin=booking")})},newRecommend:function(e){var n=this;this.$request({url:this.$api.goods.new_recommend,data:{goods_id:e}}).then((function(e){0===e.code&&(n.list=e.data.list)}))},open:function(){this.show=!0},setCoupon:function(e){this.$set(this.item.goods_coupon_center[e],"is_receive",1)},router:function(n){e.navigateTo({url:n})},request:function(n){var o=this;return h(t.default.mark((function r(){var c,i,a,u,l,p,d,f,g,m,h,b;return t.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getLocation({type:"wgs84"});case 2:if(c=t.sent,i=s(c,2),a=i[0],u=i[1],a&&e.showToast({title:"请开启位置权限",icon:"none",duration:2e3,success:function(){setTimeout((function(){e.navigateBack()}),2e3)}}),!u){t.next=14;break}return o.$showLoading(),t.next=11,o.$request({url:o.$api.book.detail,data:{goods_id:n,latitude:u.latitude,longitude:u.longitude}});case 11:l=t.sent,0===l.code&&(p=l.data.list,d=l.data.list,f=d.store,g=d.services,m=d.name,h=d.id,b=d.pic_url,o.item=p,p.goods_activity&&(o.full_reduce=p.goods_activity.full_reduce),o.store=f.slice(0,1),o.storeNum=f.length,o.services=g,o.name=m,o.goodsId=h,o.picUrl=b,o.url="".concat(o.$api.book.poster,"&goods_id=").concat(h),o.poster_config="".concat(o.poster_config,"&goods_id=").concat(h),o.poster_generate="".concat(o.poster_generate,"&goods_id=").concat(h),o.loading=!0,p.vip_card_appoint.discount>0&&(o.is_vip=!0,o.discount=p.vip_card_appoint.discount),o.is_vip_card_user=p.vip_card_appoint.is_vip_card_user),o.$hideLoading();case 14:case"end":return t.stop()}}),r)})))()}},computed:a({},(0,r.mapState)({themeObject:function(e){var n=e.mallConfig.mall.setting.theme_color;return{back:n+"-m-back "+n,backO:n+"-m-back-o "+n,theme:n,color:n+"-m-text "+n,sBack:n+"-s-back "+n}}}))};n.default=U}).call(this,o("543d")["default"])},"6e71":function(e,n,o){"use strict";var t=o("52ce"),r=o.n(t);r.a},8336:function(e,n,o){"use strict";(function(e){o("b8bc");t(o("66fd"));var n=t(o("f8b1"));function t(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,o("543d")["createPage"])},"8d90":function(e,n,o){"use strict";var t;o.d(n,"b",(function(){return r})),o.d(n,"c",(function(){return c})),o.d(n,"a",(function(){return t}));var r=function(){var e=this,n=e.$createElement;e._self._c},c=[]},f8b1:function(e,n,o){"use strict";o.r(n);var t=o("8d90"),r=o("2e84");for(var c in r)"default"!==c&&function(e){o.d(n,e,(function(){return r[e]}))}(c);o("6e71");var i,a=o("f0c5"),u=Object(a["a"])(r["default"],t["b"],t["c"],!1,null,"894b45b8",null,!1,t["a"],i);n["default"]=u.exports}},[["8336","common/runtime","common/vendor"]]]);