(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["plugins/pick/detail/detail"],{"2a8c":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("a34a")),i=n("2f62");function a(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,o,i,a,c){try{var r=t[a](c),s=r.value}catch(u){return void n(u)}r.done?e(s):Promise.resolve(s).then(o,i)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function r(t){c(a,o,i,r,s,"next",t)}function s(t){c(a,o,i,r,s,"throw",t)}r(void 0)}))}}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){n.e("components/page-component/app-quick-navigation/app-quick-navigation").then(function(){return resolve(n("aeaf"))}.bind(null,n)).catch(n.oe)},p=function(){n.e("components/page-component/goods/app-goods-banner").then(function(){return resolve(n("4f02"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/page-component/app-goods-recommend/app-goods-recommend").then(function(){return resolve(n("480e"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/page-component/goods/u-attr").then(function(){return resolve(n("fb47"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("components/page-component/goods/bd-info").then(function(){return resolve(n("a09e"))}.bind(null,n)).catch(n.oe)},g=function(){Promise.all([n.e("common/vendor"),n.e("components/page-component/goods/bd-coupon")]).then(function(){return resolve(n("2dbd"))}.bind(null,n)).catch(n.oe)},v=function(){n.e("components/page-component/goods/bd-xbc").then(function(){return resolve(n("5e18"))}.bind(null,n)).catch(n.oe)},b=function(){n.e("components/page-component/goods/bd-kb").then(function(){return resolve(n("197d"))}.bind(null,n)).catch(n.oe)},_=function(){n.e("components/page-component/goods/bd-hc").then(function(){return resolve(n("7dd9"))}.bind(null,n)).catch(n.oe)},k=function(){n.e("components/page-component/goods/bd-detail").then(function(){return resolve(n("af2c"))}.bind(null,n)).catch(n.oe)},w=function(){n.e("components/page-component/goods/bd-comments").then(function(){return resolve(n("6cd4"))}.bind(null,n)).catch(n.oe)},y=function(){n.e("components/basic-component/app-close/app-close").then(function(){return resolve(n("d6b7"))}.bind(null,n)).catch(n.oe)},O={name:"detail",data:function(){return{showClose:!1,is_open:0,detail:null,attrShow:0,selectAttr:{},isVip:!1,discount:null,is_vip_card_user:0,shareData:{},recommend_list:[],activity:{},shareUrl:"",activity_status:1,poster_config:this.$api.pick.poster_config,poster_generate:this.$api.pick.poster_generate,flash_sale:null}},computed:u(u({},(0,i.mapGetters)("mallConfig",{getTheme:"getTheme"})),{},{themeObject:function(){return{back:this.getTheme+"-m-back "+this.getTheme,theme:this.getTheme,color:this.getTheme+"-m-text "+this.getTheme,sBack:this.getTheme+"-s-back "+this.getTheme,backP:this.getTheme+"-m-back-p "+this.getTheme}}}),components:{"app-quick-navigation":l,appGoodsBanner:p,"app-goods-recommend":f,uAttr:h,bdInfo:m,bdCoupon:g,bdXbc:v,bdKb:b,bdHc:_,bdDetail:k,bdComments:w,appClose:y},methods:{getMall:function(t){this.is_open=t.is_open},getDetail:function(e){var n=this;return r(o.default.mark((function i(){var a,c,r,s;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,n.$request({url:n.$api.pick.goods,method:"get",data:{id:e}});case 2:a=o.sent,0===a.code?(c=a.data.detail,r=c.vip_card_appoint,s=c.plugin_extra,n.detail=a.data.detail,n.flash_sale=s.flash_sale,n.activity=a.data.activity,n.recommend_list=a.data.list,n.shareUrl="".concat(n.$api.pick.poster,"&goods_id=").concat(n.detail.id),n.activity_status=a.data.activity_status,(r.discount||"0.00"===r.discount)&&(n.isVip=!0,n.discount=r.discount),n.is_vip_card_user=r.is_vip_card_user):t.showToast({title:a.msg,icon:"none"});case 4:case"end":return o.stop()}}),i)})))()},setCoupon:function(t){this.$set(this.detail.goods_coupon_center[t],"is_receive",1)},onAttr:function(t){this.selectAttr=t},quickShare:function(t){this.shareData=t},clickAttr:function(e){1===this.activity_status&&(1===e?this.attrShow=!0:t.navigateTo({url:"/plugins/pick/pond/pond?rule_num=".concat(this.activity.rule_num,"&pick_activity_id=").concat(this.activity.id)}))},add:function(e){var n=this;return r(o.default.mark((function i(){var a,c;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return a=e.goods_list[0],o.next=3,n.$request({url:n.$api.pick.add,data:{goods_id:a.id,attr:a.goods_attr_id,num:a.num,pick_activity_id:n.activity.id}});case 3:c=o.sent,0===c.code&&t.navigateBack();case 5:case"end":return o.stop()}}),i)})))()},back:function(){t.navigateTo({url:"/pages/index/index"})},goBack:function(){t.navigateTo({url:"/plugins/pick/index/index"})},favorite:function(){var e=this.$api.user.favorite_add,n=!0;this.detail.favorite&&(e=this.$api.user.favorite_remove,n=!1),this.detail.favorite=n,this.$request({url:e,data:{goods_id:this.detail.id}}).then((function(e){0===e.code||t.showModal({title:"提示",content:e.msg,showCancel:!1})})).catch((function(){}))}},onShow:function(){var t=this;this.showClose=!1,setTimeout((function(){t.showClose=!0}))},onLoad:function(t){wx.showShareMenu({menus:["shareAppMessage","shareTimeline"]}),this.getDetail(t.goods_id)},onShareTimeline:function(){return this.$shareTimeline({title:this.detail.app_share_title?this.detail.app_share_title:this.detail.name,query:{goods_id:this.detail.goods_id}})}};e.default=O}).call(this,n("543d")["default"])},"414b":function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement;t._self._c},a=[]},7744:function(t,e,n){"use strict";n.r(e);var o=n("2a8c"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},"8e2a":function(t,e,n){"use strict";var o=n("aa4b"),i=n.n(o);i.a},aa4b:function(t,e,n){},c049:function(t,e,n){"use strict";n.r(e);var o=n("414b"),i=n("7744");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("8e2a");var c,r=n("f0c5"),s=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"295e09b4",null,!1,o["a"],c);e["default"]=s.exports},f018:function(t,e,n){"use strict";(function(t){n("aaea");o(n("66fd"));var e=o(n("c049"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["f018","common/runtime","common/vendor"]]]);