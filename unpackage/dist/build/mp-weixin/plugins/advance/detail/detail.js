(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["plugins/advance/detail/detail"],{5490:function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.active=!1})},a=[]},"5af6":function(t,e,n){"use strict";var o=n("82b1"),i=n.n(o);i.a},"6cb9":function(t,e,n){"use strict";n.r(e);var o=n("7268"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},7268:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("2f62");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(){n.e("components/page-component/goods/app-goods-banner").then(function(){return resolve(n("b169"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("plugins/advance/components/detail-ad").then(function(){return resolve(n("d21e"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("plugins/advance/components/detail-price-share").then(function(){return resolve(n("1760"))}.bind(null,n)).catch(n.oe)},u=function(){Promise.all([n.e("common/vendor"),n.e("plugins/advance/components/detail-bottom-button")]).then(function(){return resolve(n("8042"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("plugins/advance/components/detail-attr").then(function(){return resolve(n("2a8e"))}.bind(null,n)).catch(n.oe)},p=function(){n.e("components/page-component/app-join-member/app-join-member").then(function(){return resolve(n("4829"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/page-component/goods/app-goods-service").then(function(){return resolve(n("49ac"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/page-component/app-related-suggestion-product/app-related-suggestion-product").then(function(){return resolve(n("3d12"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("plugins/advance/components/detail-discount").then(function(){return resolve(n("d6a0"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("plugins/advance/components/detail-vip").then(function(){return resolve(n("0797"))}.bind(null,n)).catch(n.oe)},_=function(){Promise.all([n.e("common/vendor"),n.e("components/page-component/app-vip-card/app-vip-card")]).then(function(){return resolve(n("63a9"))}.bind(null,n)).catch(n.oe)},v=function(){n.e("components/page-component/app-goods-detail/app-name").then(function(){return resolve(n("9129"))}.bind(null,n)).catch(n.oe)},b=function(){n.e("components/page-component/app-quick-navigation/app-quick-navigation").then(function(){return resolve(n("36d8"))}.bind(null,n)).catch(n.oe)},w=function(){n.e("components/page-component/goods/app-goods-full-reduce").then(function(){return resolve(n("2069"))}.bind(null,n)).catch(n.oe)},T=function(){n.e("components/basic-component/app-close/app-close").then(function(){return resolve(n("699f"))}.bind(null,n)).catch(n.oe)},k=function(){n.e("components/page-component/goods/bd-detail").then(function(){return resolve(n("c91c"))}.bind(null,n)).catch(n.oe)},O=function(){n.e("components/page-component/goods/bd-comments").then(function(){return resolve(n("57fa"))}.bind(null,n)).catch(n.oe)},j=function(){n.e("components/page-component/goods/bd-kb").then(function(){return resolve(n("7e79"))}.bind(null,n)).catch(n.oe)},y=function(){n.e("components/page-component/goods/bd-hc").then(function(){return resolve(n("ecb3"))}.bind(null,n)).catch(n.oe)},$=function(){Promise.all([n.e("common/vendor"),n.e("components/page-component/goods/bd-coupon")]).then(function(){return resolve(n("cfa2"))}.bind(null,n)).catch(n.oe)},P=function(){n.e("components/page-component/goods/bd-xbc").then(function(){return resolve(n("abb7"))}.bind(null,n)).catch(n.oe)},D={name:"detail",data:function(){return{showClose:!1,is_open:0,detail:null,full_reduce:null,active:!0,attr_deposit:"0",attr_swell_deposit:"0",attr_stock:0,attr_price:"0",attr_price_member:0,url:"",level_show:0,loading:!1,select_attr_group:[],zhe:!1,list:[],num:1,shareShow:!1,attr_pic_url:"",goods_id:-1,d:0,h:0,m:0,s:0,end_time:-1,buttonDisabled:!1,poster_config:this.$api.advance.poster_config,poster_generate:this.$api.advance.poster_generate}},onLoad:function(t){this.goods_id=t.id,wx.showShareMenu({menus:["shareAppMessage","shareTimeline"]})},onShow:function(){var e=this;this.showClose=!1,setTimeout((function(){e.showClose=!0})),this.$nextTick((function(){e.request_detail({id:e.goods_id}),e.$request({url:e.$api.advance.goods_list,data:{goods_id:e.goods_id}}).then((function(n){0===n.code?e.list=n.data.list:1===n.code&&t.showModal({title:"提示",content:n.msg})}))}))},onHide:function(){clearInterval(this.end_time)},onUnload:function(){clearInterval(this.end_time)},methods:{getMall:function(t){this.is_open=t.is_open},request_detail:function(e){var n=this;this.$request({url:this.$api.advance.detail,data:{id:e.id},method:"get"}).then((function(e){0===e.code?(n.detail=e.data.detail,n.detail.goods_activity&&(n.full_reduce=n.detail.goods_activity.full_reduce),n.detail.num=1,n.loading=!0,n.url="".concat(n.$api.advance.poster,"&goods_id=").concat(n.detail.id),n.getTime(n.detail.advanceGoods.end_prepayment_at),n.set_attr_active()):1===e.code&&(t.hideLoading(),t.showModal({content:e.msg,showCancel:!1,success:function(){t.navigateBack()}}))}))},open_share:function(){this.shareShow=!0},change_num:function(t){this.num+=t},change_num_data:function(t){this.num=t},favorite:function(t){this.detail.favorite=t},select_attr:function(t,e){for(var n=this.detail.attr_groups,o=":",i=0,a=0;a<n.length;a++)for(var r=this.detail.attr_groups[a].attr_list,c=0;c<r.length;c++)n[a].attr_group_id===t&&r[c].attr_id===e?this.$set(this.detail.attr_groups[a].attr_list[c],"active",!0):n[a].attr_group_id===t&&r[c].attr_id!==e&&this.$set(this.detail.attr_groups[a].attr_list[c],"active",!1),this.detail.attr_groups[a].attr_list[c].active&&(i=this.detail.attr_groups[a].attr_list[c].attr_id,o+=":".concat(i));var s=o.substr(2);this.get_price_stock(s)},set_attr_active:function(){for(var t=0,e=":",n=0;n<this.detail.attr_groups.length;n++)for(var o=0;o<this.detail.attr_groups[n].attr_list.length;o++)0!==o?this.$set(this.detail.attr_groups[n].attr_list[o],"active",!1):0===o&&(t=this.detail.attr_groups[n].attr_list[o].attr_id,e+=":".concat(t),this.$set(this.detail.attr_groups[n].attr_list[o],"active",!0));this.get_price_stock(e.substr(2))},get_price_stock:function(t){for(var e=this.detail.attr,n=0;n<e.length;n++)if(e[n].sign_id===t){this.select_attr_group=e[n].attr_list;var o=e[n],i=o.deposit,a=o.swell_deposit,r=o.stock,c=o.price,s=o.price_member,l=o.pic_url;this.attr_deposit=i,this.attr_swell_deposit=a,this.attr_stock=r,this.attr_price=c,this.attr_price_member=s,this.attr_pic_url=l}0==this.attr_stock?this.buttonDisabled=!0:this.buttonDisabled=!1},close_attr:function(t){this.active=t},getTime:function(t){var e=this,n=new Date(t.replace(/-/g,"/")).getTime()-(new Date).getTime();this.d=parseInt(n/1e3/60/60/24),this.h=parseInt(n/1e3/60/60%24),this.m=parseInt(n/1e3/60%60),this.s=parseInt(n/1e3%60),this.end_time=setInterval((function(){var n=(new Date).getTime(),o=new Date(t.replace(/-/g,"/")).getTime(),i=o-n;if(i>0){var a=parseInt(i/1e3/60/60/24),r=parseInt(i/1e3/60/60%24),c=parseInt(i/1e3/60%60),s=parseInt(i/1e3%60);e.d=a,e.h=r,e.m=c,e.s=s}else clearInterval(e.end_time)}),1e3)},setCoupon:function(t){this.$set(this.detail.goods_coupon_center[t],"is_receive",1)}},components:{"app-goods-banner":c,"detail-ad":s,"detail-price-share":l,"detail-bottom-button":u,"detail-attr":d,"app-join-member":p,"app-goods-service":h,"app-related-suggestion-product":f,"detail-discount":m,"detail-vip":g,"app-name":v,"app-vip-card":_,"app-quick-navigation":b,appGoodsFullReduce:w,appClose:T,bdDetail:k,bdComments:O,bdKb:j,bdHc:y,bdCoupon:$,bdXbc:P},computed:a(a(a(a({},(0,o.mapGetters)("mallConfig",{vip:"getVip",getTheme:"getTheme"})),(0,o.mapGetters)("user",{is_vip:"is_vip"})),(0,o.mapState)({mall:function(t){return t.mallConfig.mall}})),{},{themeObject:function(){return{back:this.getTheme+"-m-back "+this.getTheme,backP:this.getTheme+"-m-back-p "+this.getTheme,backO:this.getTheme+"-m-back-o "+this.getTheme,theme:this.getTheme,color:this.getTheme+"-m-text "+this.getTheme,sBack:this.getTheme+"-s-back "+this.getTheme,border:this.getTheme+"-m-border "+this.getTheme}}}),onShareAppMessage:function(){var t=this.detail,e=t.app_share_title,n=t.name,o=t.id,i=t.app_share_pic;return this.$shareAppMessage({path:"/plugins/advance/detail/detail",title:e||n,imageUrl:i||"",params:{id:o}})},onShareTimeline:function(){var t=this.detail,e=t.app_share_title,n=t.name,o=t.id;return this.$shareTimeline({title:e||n,query:{id:o}})}};e.default=D}).call(this,n("543d")["default"])},"82b1":function(t,e,n){},"9c60":function(t,e,n){"use strict";(function(t){n("b8bc");o(n("66fd"));var e=o(n("c115"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},c115:function(t,e,n){"use strict";n.r(e);var o=n("5490"),i=n("6cb9");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("5af6");var r,c=n("f0c5"),s=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,"701f69ed",null,!1,o["a"],r);e["default"]=s.exports}},[["9c60","common/runtime","common/vendor"]]]);