{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/26439/Desktop/shop4.3.57_1/plugins/exchange/detail/detail.vue?4182","webpack:///C:/Users/26439/Desktop/shop4.3.57_1/plugins/exchange/detail/detail.vue?787c","webpack:///C:/Users/26439/Desktop/shop4.3.57_1/plugins/exchange/detail/detail.vue?de3d","webpack:///C:/Users/26439/Desktop/shop4.3.57_1/plugins/exchange/detail/detail.vue?1a86","uni-app:///plugins/exchange/detail/detail.vue","webpack:///C:/Users/26439/Desktop/shop4.3.57_1/plugins/exchange/detail/detail.vue?1dd1","webpack:///C:/Users/26439/Desktop/shop4.3.57_1/plugins/exchange/detail/detail.vue?5802"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4G;AACAA,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACsC;;;AAG3F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAgmB,CAAgB,0nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuFpnB,gD;;;;;AAKA;AACA,eADA;AAEA,MAFA,kBAEA;AACA;AACA,iBADA;AAEA,oBAFA;AAGA,cAHA;AAIA,mBAJA;AAKA,aALA;AAMA,eANA;AAOA,oBAPA;AAQA,sBARA;AASA,cATA;AAUA,aAVA;AAWA,iBAXA;AAYA,eAZA;;AAcA,GAjBA;AAkBA;AACA,yBADA;AAEA,gBAFA;AAGA,8BAHA,EAlBA;;AAuBA,QAvBA,kBAuBA,OAvBA,EAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cArBA;;AAuBA;AACA,oBADA;AAEA,oBAFA;;AAIA;AACA,GAxDA;AAyDA,QAzDA,oBAyDA;AACA;AACA;AACA;AACA,GA7DA;AA8DA;AACA;AACA,wBADA,GADA;;AAIA;AACA,4FADA,GAJA,CA9DA;;;AAsEA;AACA,YADA,oBACA,IADA,EACA;AACA;AACA;AACA,6QADA;;AAGA,OAJA,MAIA;AACA;AACA,mGADA;;AAGA,OAJA,MAIA;AACA;AACA,6EADA;;AAGA;AACA,KAfA;AAgBA,UAhBA,oBAgBA;AACA;AACA;AACA,KAnBA;AAoBA,SApBA,iBAoBA,IApBA,EAoBA;AACA;AACA;AACA,uBADA;;AAGA;AACA;AACA,wCADA;AAEA;AACA,2BADA;AAEA,6BAFA,EAFA;;AAMA,wBANA;AAOA,YAPA,CAOA;AACA;AACA;AACA;AACA,iCADA;AAEA,4BAFA;;AAIA;AACA,WANA,MAMA;AACA;AACA,iCADA;AAEA,0BAFA;AAGA,4BAHA;;AAKA;AACA,SAtBA,EAsBA,KAtBA,CAsBA;AACA;AACA,SAxBA;AAyBA,OA1BA,MA0BA;AACA;AACA,mBADA;AAEA;AACA,6BADA;AAEA,0CAFA;AAGA,+BAHA;AAIA,qBAJA;AAKA,uCALA,GAFA;;AASA,yBATA;AAUA,2BAVA;;AAYA;AACA;AACA;AACA,kBADA;;AAGA;AACA,KAtEA;AAuEA,UAvEA,kBAuEA,QAvEA,EAuEA,GAvEA,EAuEA;AACA,eADA,aACA;AACA;AACA;AACA;AACA,WAHA,MAGA;AACA;AACA;AACA,SARA;AASA;AACA,KAjFA;AAkFA,UAlFA,oBAkFA;AACA;AACA;AACA;AACA,6BADA;AAEA,sBAFA;AAGA,wBAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBADA;;AAGA;AACA,qCADA;AAEA;AACA,yBADA;AAEA,2BAFA,EAFA;;AAMA,sBANA;AAOA,UAPA,CAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA,+BADA;AAEA,wBAFA;AAGA,0BAHA;;AAKA;AACA,OArBA,EAqBA,KArBA,CAqBA;AACA;AACA,OAvBA;AAwBA,KA3HA;AA4HA,WA5HA,qBA4HA;AACA;AACA;AACA,yFADA;AAEA;AACA,yBADA,EAFA;;AAKA,UALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBADA,cACA;AACA;AACA,iBAHA;AAIA;AACA,WARA,MAQA;AACA;AACA;AACA;AACA,SAbA,MAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAPA,MAOA;AACA;AACA,iCADA;AAEA,0BAFA;AAGA,4BAHA;;AAKA;AACA;AACA,OAtCA,EAsCA,KAtCA,CAsCA;AACA;AACA;AACA,OAzCA;AA0CA,KAxKA,EAtEA,E;;;;;;;;;;;;;AC5FA;AAAA;AAAA;AAAA;AAA0nC,CAAgB,omCAAG,EAAC,C;;;;;;;;;;;ACA9oC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"plugins/exchange/detail/detail.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './plugins/exchange/detail/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=1ff31c40&scoped=true&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&id=1ff31c40&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1ff31c40\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"plugins/exchange/detail/detail.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=template&id=1ff31c40&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"","<template>\r\n    <app-layout>\r\n        <view class=\"code-info\" :style=\"{backgroundImage: 'url('+ background + ')'}\">\r\n            <view class=\"code\">{{code}}</view>\r\n            <view v-if=\"exchange == 0\">该兑换码包含{{list.length}}种礼品，您可以{{mode == 0 ? '全部':'任选一件'}}兑换：</view>\r\n            <view v-if=\"exchange == 1\">于{{r_raffled_at}}兑换以下礼品</view>\r\n        </view>\r\n        <view>\r\n            <view class=\"rewards\" v-for=\"(item,index) in list\" :key=\"index\">\r\n                <view class=\"rewards-top dir-left-nowrap cross-center\" :class=\"mode == 1 ? 'active-item':''\">\r\n                    <app-radio width=\"88\" :height=\"item.type == 'integral' || item.type == 'balance' || item.type == 'svip' ? '36':'140'\"  @click=\"toggle\" :value=\"item.active\" :item=\"item\" :theme=\"getTheme\" type=\"round\" v-if=\"mode == 1\">\r\n                    </app-radio>\r\n                    <view v-if=\"item.type == 'goods'\" class=\"dir-left-nowrap card goods\">\r\n                        <image class=\"card-img\" mode=\"aspectFill\" :src=\"item.goods_info.cover_pic\"></image>\r\n                        <view class=\"card-info\">\r\n                            <view class=\"t-omit-two card-name\">{{item.goods_info.name}}</view>\r\n                            <view class=\"attr\">{{item.goods_info.attr_str}}</view>\r\n                            <view class=\"dir-right-nowrap\">\r\n                                <div class=\"goods-num\" :class=\"getTheme + '-m-text ' + getTheme\">x{{item.goods_num}}</div>\r\n                            </view>\r\n                        </view>\r\n                    </view>\r\n                    <view v-if=\"item.type == 'card'\" class=\"dir-left-nowrap card\">\r\n                        <image class=\"card-img\" mode=\"aspectFill\" v-if=\"item.card_info.pic_url\" :src=\"item.card_info.pic_url\"></image>\r\n                        <view class=\"card-info\">\r\n                            <view class=\"dir-left-nowrap\">\r\n                                <image src=\"./../image/card.png\"></image>\r\n                                <view class=\"t-omit-two card-name\">{{item.card_info.name}}</view>\r\n                            </view>\r\n                            <view class=\"main-between cross-center\">\r\n                                <div class=\"card-number\" :class=\"getTheme + '-m-text ' + getTheme + '-m-back-o ' + getTheme\">剩余{{item.card_info.number}}次</div>\r\n                                <div class=\"card-num\" :class=\"getTheme + '-m-text ' + getTheme\">x{{item.card_num}}</div>\r\n                            </view>\r\n                        </view>\r\n                    </view>\r\n                    <view v-if=\"item.type == 'coupon'\" class=\"dir-left-nowrap card\">\r\n                        <view class=\"card-info\">\r\n                            <view class=\"dir-left-nowrap\">\r\n                                <image src=\"./../image/coupon.png\"></image>\r\n                                <view class=\"t-omit-two card-name\">{{item.coupon_info.name}}</view>\r\n                            </view>\r\n                            <view class=\"main-between cross-center\">\r\n                                <div v-if=\"item.coupon_info.type == 1\" class=\"card-number\" :class=\"getTheme + '-m-text ' + getTheme + '-m-back-o ' + getTheme\">{{item.coupon_info.discount}}折 满{{item.coupon_info.min_price == 0 ? '任意金额': '￥'+item.coupon_info.min_price}}可用 <text style=\"margin-left: 10rpx\" v-if=\"item.coupon_info.discount_limit\">优惠上限￥{{item.coupon_info.discount_limit}}</text></div>\r\n                                <div v-if=\"item.coupon_info.type == 2\" class=\"card-number\" :class=\"getTheme + '-m-text ' + getTheme + '-m-back-o ' + getTheme\">￥{{item.coupon_info.sub_price}} 满{{item.coupon_info.min_price == 0 ? '任意金额': '￥'+item.coupon_info.min_price}}可用</div>\r\n                                <div class=\"card-num\" :class=\"getTheme + '-m-text ' + getTheme\">x{{item.coupon_num}}</div>\r\n                            </view>\r\n                        </view>\r\n                    </view>\r\n                    <view v-if=\"item.type == 'integral' || item.type == 'balance' || item.type == 'svip'\" class=\"dir-left-nowrap balance\">\r\n                        <view class=\"balance-info cross-center main-between\">\r\n                            <view class=\"dir-left-nowrap cross-center\">\r\n                                <image v-if=\"item.type == 'integral'\" src=\"./../image/point.png\"></image>\r\n                                <image v-if=\"item.type == 'balance'\" src=\"./../image/balance.png\"></image>\r\n                                <image v-if=\"item.type == 'svip'\" src=\"./../image/svip.png\"></image>\r\n                                <view class=\"balance-name\">{{item.name}}</view>\r\n                            </view>\r\n                            <view v-if=\"item.type == 'integral'\" :class=\"getTheme + '-m-text ' + getTheme\">{{item.integral_num}}</view>\r\n                            <view v-if=\"item.type == 'balance'\" :class=\"getTheme + '-m-text ' + getTheme\">￥{{item.balance}}</view>\r\n                            <view v-if=\"item.type == 'svip'\" :class=\"getTheme + '-m-text ' + getTheme\">{{item.svip_info.discount}}折</view>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n                <view v-if=\"exchange == 1\" class=\"rewards-bottom dir-right-nowrap cross-center\">\r\n                    <view v-if=\"item.is_send == 0\" @click=\"apply(item)\" :class=\"getTheme + '-m-back ' + getTheme\" class=\"rewards-submit\">立即领取</view>\r\n                    <view v-if=\"item.is_send == 1\" class=\"rewards-submit over\">已领取</view>\r\n                    <view v-if=\"item.goods_id > 0 || item.user_coupon_id.length > 0 || item.user_card_id.length > 0\" @click=\"toDetail(item)\" :class=\"getTheme + '-m-text ' + getTheme + '-m-border ' + getTheme\" class=\"rewards-detail\">查看详情</view>\r\n                </view>\r\n            </view>\r\n        </view>\r\n        <view v-if=\"exchange == 0\" class=\"placeholder\"></view>\r\n        <view v-if=\"exchange == 0 && list.length > 0\" class=\"apply safe-area-inset-bottom\">\r\n            <view class=\"apply-btn\" @click=\"submit\" :class=\"getTheme + '-m-back ' + getTheme\">立即兑换</view>\r\n        </view>\r\n        <u-mask :show=\"dialog\" :maskClickAble=\"false\" :zoom=\"false\">\r\n            <view class=\"dialog\">\r\n                <image class=\"dialog-img\" src=\"./../image/error.png\"></image>\r\n                <view class=\"dialog-msg\">\r\n                    <text>{{msg}}</text>\r\n                </view>\r\n                <view class=\"dialog-other\">{{other}}</view>\r\n                <view @click=\"goback\"  :class=\"getTheme + '-m-back ' + getTheme\" class=\"dialog-button\">我知道了</view>\r\n            </view>\r\n        </u-mask>\r\n    </app-layout>\r\n</template>\r\n\r\n<script>\r\n    import {mapGetters, mapState} from 'vuex';\r\n    import uMask from '../../../components/basic-component/u-mask/u-mask.vue';\r\n    import appIphoneX from '../../../components/basic-component/app-iphone-x/app-iphone-x.vue';\r\n    import appRadio from '../../../components/basic-component/app-radio/app-radio.vue';\r\n\r\n    export default {\r\n        name: \"index\",\r\n        data() {\r\n            return {\r\n                first: true,\r\n                loading: false,\r\n                code: '',\r\n                dialog: false,\r\n                msg: '',\r\n                other: '',\r\n                background: '',\r\n                r_raffled_at: '',\r\n                list: [],\r\n                mode: 0,\r\n                exchange: 0,\r\n                token: ''\r\n            };\r\n        },\r\n        components:{\r\n            'app-radio': appRadio,\r\n            uMask,\r\n            'app-iphone-x': appIphoneX,\r\n        },\r\n        onLoad(options) {\r\n            let that = this;\r\n            that.code = options.code;\r\n            that.exchange = options.exchange == 1 ? 1 : 0;\r\n            that.background = that.exchangeImg.a;\r\n            switch(that.getTheme) {\r\n                case 'b':\r\n                    that.background = that.exchangeImg.b;\r\n                    break;\r\n                case 'c':\r\n                    that.background = that.exchangeImg.c;\r\n                    break;\r\n                case 'd':\r\n                    that.background = that.exchangeImg.d;\r\n                    break;\r\n                case 'e':\r\n                    that.background = that.exchangeImg.e;\r\n                    break;\r\n                case 'g':\r\n                    that.background = that.exchangeImg.g;\r\n                    break;\r\n                case 'h':\r\n                    that.background = that.exchangeImg.h;\r\n                    break;\r\n                case 'i':\r\n                    that.background = that.exchangeImg.i;\r\n                    break;\r\n            }\r\n            that.$showLoading({\r\n                type: 'global',\r\n                text: '加载中...'\r\n            });\r\n            that.getList();\r\n        },\r\n        onShow() {\r\n            if(this.exchange == 1 && !this.first) {\r\n                this.getList()\r\n            }\r\n        },\r\n        computed: {\r\n            ...mapGetters('mallConfig', {\r\n                getTheme: 'getTheme',\r\n            }),\r\n            ...mapState({\r\n                exchangeImg: state => state.mallConfig.__wxapp_img.exchange\r\n            })\r\n        },\r\n        methods: {\r\n            toDetail(item) {\r\n                if(item.type == 'goods') {\r\n                    uni.navigateTo({\r\n                        url: `/pages/goods/goods?id=${item.goods_id}&code=${this.code}&token=${item.token}&attr=${item.goods_info.attr_str}&attr_id=${item.attr_id}&goods_num=${item.goods_num}&exchange=${item.is_send}`\r\n                    });\r\n                }else if(item.type == 'coupon') {\r\n                    uni.navigateTo({\r\n                        url: `/pages/coupon/details/details-no-share?person=1&id=${item.user_coupon_id[0]}`\r\n                    });\r\n                }else if(item.type == 'card') {\r\n                    uni.navigateTo({\r\n                        url: `/pages/card/details/details?id=${item.user_card_id[0]}`\r\n                    });\r\n                }\r\n            },\r\n            goback() {\r\n                this.dialog = false;\r\n                uni.navigateBack();\r\n            },\r\n            apply(item) {\r\n                let that = this;\r\n                uni.showLoading({\r\n                    title: '领取中...'\r\n                });\r\n                if(item.type != 'goods') {\r\n                    that.$request({\r\n                        url: that.$api.exchange.covert,\r\n                        data: {\r\n                            code: this.code,\r\n                            token: item.token\r\n                        },\r\n                        method: 'post'\r\n                    }).then(response=>{\r\n                        uni.hideLoading();\r\n                        if(response.code == 0) {\r\n                            uni.showToast({\r\n                                title: response.msg,\r\n                                duration: 1000\r\n                            });\r\n                            this.getList();\r\n                        }else {\r\n                            uni.showToast({\r\n                                title: response.msg,\r\n                                icon: 'none',\r\n                                duration: 1000\r\n                            });\r\n                        }\r\n                    }).catch(response => {\r\n                        uni.hideLoading();\r\n                    });\r\n                }else {\r\n                    let mch_list = [{\r\n                        mch_id: 0,\r\n                        goods_list: [{\r\n                            id: item.goods_id,\r\n                            attr: item.goods_info.attr_str,\r\n                            num: item.goods_num,\r\n                            cat_id: 0,\r\n                            goods_attr_id: item.attr_id\r\n                        }],\r\n                        code: this.code,\r\n                        token: item.token,\r\n                    }];\r\n                    let url = `/pages/order-submit/order-submit?mch_list=${JSON.stringify(mch_list)}`;\r\n                    url += `&preview_url=${encodeURIComponent(this.$api.exchange.exchange_preview)}&submit_url=${encodeURIComponent(this.$api.exchange.exchange_submit)}&plugin=exchange`;\r\n                    uni.navigateTo({\r\n                        url: url\r\n                    })\r\n                }\r\n            },\r\n            toggle(boolean,row) {\r\n                for(let item of this.list) {\r\n                    if(item.token == row.token) {\r\n                        item.active = boolean;\r\n                        this.token = row.token\r\n                    }else {\r\n                        item.active = false;\r\n                    }\r\n                }\r\n                this.$forceUpdate();\r\n            },\r\n            submit() {\r\n                let that = this;\r\n                if(that.mode == 1 && !that.token) {\r\n                    uni.showToast({\r\n                        title: '请选择想要兑换的礼品',\r\n                        icon: 'none',\r\n                        duration: 1000\r\n                    });\r\n                    return false\r\n                }\r\n                if(this.loading) {\r\n                    return false\r\n                }\r\n                this.loading = true;\r\n                uni.showLoading({\r\n                    title: '领取中...'\r\n                });\r\n                that.$request({\r\n                    url: that.$api.exchange.unite,\r\n                    data: {\r\n                        code: this.code,\r\n                        token: this.token\r\n                    },\r\n                    method: 'post'\r\n                }).then(response=>{\r\n                    this.loading = false;\r\n                    uni.hideLoading();\r\n                    if(response.code == 0) {\r\n                        this.exchange = 1;\r\n                        this.mode = 0;\r\n                        this.getList();\r\n                    }else {\r\n                        uni.showToast({\r\n                            title: response.msg,\r\n                            icon: 'none',\r\n                            duration: 1000\r\n                        });\r\n                    }\r\n                }).catch(response => {\r\n                    uni.hideLoading();\r\n                });\r\n            },\r\n            getList() {\r\n                let that = this;\r\n                that.$request({\r\n                    url: that.exchange == 1 ? that.$api.exchange.log_detail : that.$api.exchange.info,\r\n                    data: {\r\n                        code: that.code\r\n                    }\r\n                }).then(response=>{\r\n                    that.$hideLoading();\r\n                    uni.hideLoading();\r\n                    that.first = false;\r\n                    if(response.code == 0) {\r\n                        if(that.exchange == 0) {\r\n                            that.list = response.list.rewards;\r\n                            that.mode = response.list.mode;\r\n                            if(that.mode == 1) {\r\n                                for(let item of that.list) {\r\n                                    item.active = false;\r\n                                }\r\n                            }\r\n                        }else {\r\n                            that.r_raffled_at = response.data.codeModel.r_raffled_at\r\n                            that.list = response.data.rewards;\r\n                        }\r\n                    }else {\r\n                        if(that.exchange == 0) {\r\n                            that.msg = response.msg;\r\n                            that.other = '';\r\n                            if(response.msg == '该兑换码未到使用时间!') {\r\n                                that.other = response.data.valid_start_time + '-' + response.data.valid_end_time + ' 可用'\r\n                            }\r\n                            that.dialog = true;\r\n                        }else {\r\n                            uni.showToast({\r\n                                title: response.msg,\r\n                                icon: 'none',\r\n                                duration: 1000\r\n                            });\r\n                        }\r\n                    }\r\n                }).catch(response => {\r\n                    that.$hideLoading();\r\n                    uni.hideLoading();\r\n                });\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n    .dialog {\r\n        margin: 270rpx auto;\r\n        background-color: #fff;\r\n        border-radius: 16rpx;\r\n        width: 600rpx;\r\n        padding: 60rpx 0;\r\n        text-align: center;\r\n        .dialog-img {\r\n            width: 200rpx;\r\n            height: 200rpx;\r\n            margin: 0 auto 20rpx;\r\n        }\r\n        .dialog-msg {\r\n            font-size: 32rpx;\r\n            color: #353535;\r\n        }\r\n        .dialog-other {\r\n            font-size: 24rpx;\r\n            color: #999999;\r\n        }\r\n        .dialog-button {\r\n            font-size: 26rpx;\r\n            width: 520rpx;\r\n            height: 90rpx;\r\n            border-radius: 45rpx;\r\n            line-height: 90rpx;\r\n            text-align: center;\r\n            color: #fff;\r\n            margin: 50rpx auto 0;\r\n        }\r\n    }\r\n    .code-info {\r\n        width: 702rpx;\r\n        height: 240rpx;\r\n        border-radius: 16rpx;\r\n        background-size: 100% 100%;\r\n        margin: 24rpx;\r\n        text-align: center;\r\n        color: #fff;\r\n        font-size: 24rpx;\r\n        .code {\r\n            margin-top: 50rpx;\r\n            display: inline-block;\r\n            font-size: 38rpx;\r\n            text-align: center;\r\n            padding: 24rpx 95rpx;\r\n            border-radius: 60rpx;\r\n            color: #fff;\r\n            background-color: rgba(255,255,255,.2);\r\n            margin-bottom: 20rpx;\r\n        }\r\n    }\r\n    .rewards {\r\n        background-color: #fff;\r\n        border-radius: 16rpx;\r\n        width: 702rpx;\r\n        margin: 24rpx auto 0;\r\n        .rewards-top {\r\n            padding: 34rpx 40rpx;\r\n            &.active-item {\r\n                padding-left: 0;\r\n            }\r\n            .active {\r\n                width: 88rpx;\r\n                height: 140rpx;\r\n                text-align: center;\r\n                flex-shrink: 0;\r\n                image {\r\n                    width: 32rpx;\r\n                    height: 32rpx;\r\n                    margin-top: 54rpx;\r\n                    border-radius: 16rpx;\r\n                }\r\n                &.small {\r\n                    height: 36rpx;\r\n                    image {\r\n                        margin-top: 2rpx;\r\n                    }\r\n                }\r\n            }\r\n            .goods-num {\r\n                font-size: 28rpx;\r\n            }\r\n            .balance {\r\n                width: 100%;\r\n                .balance-info {\r\n                    width: 100%;\r\n                    image {\r\n                        width: 30rpx;\r\n                        height: 30rpx;\r\n                        margin-right: 14rpx;\r\n                    }\r\n                    .balance-name {\r\n                        font-size: 28rpx;\r\n                        color: #353535;\r\n                    }\r\n                }\r\n            }\r\n            .card {\r\n                width: 100%;\r\n                &.goods {\r\n                    .card-info {\r\n                        .card-name {\r\n                            margin-top: 0;\r\n                            margin-bottom: 10rpx;\r\n                        }\r\n                    }\r\n                }\r\n                .card-img {\r\n                    height: 140rpx;\r\n                    width: 140rpx;\r\n                    border-radius: 8rpx;\r\n                    margin-right: 20rpx;\r\n                    flex-shrink: 0;\r\n                }\r\n                .card-info {\r\n                    width: 100%;\r\n                    image {\r\n                        width: 30rpx;\r\n                        height: 30rpx;\r\n                        margin-right: 14rpx;\r\n                    }\r\n                    .attr {\r\n                        font-size: 24rpx;\r\n                        color: #999;\r\n                    }\r\n                    .card-name {\r\n                        margin-top: -5rpx;\r\n                        font-size: 28rpx;\r\n                        color: #353535;\r\n                        margin-bottom: 30rpx;\r\n                    }\r\n                    .card-number {\r\n                        padding: 12rpx 20rpx;\r\n                        font-size: 24rpx;\r\n                        border-radius: 30rpx;\r\n                    }\r\n                    .card-num {\r\n                        font-size: 28rpx;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        .rewards-bottom {\r\n            border-top: #{2rpx} solid #e2e2e2;\r\n            height: #{118rpx};\r\n            width: 100%;\r\n            padding: 0 #{30rpx};\r\n            .rewards-submit {\r\n                height: #{68rpx};\r\n                line-height: #{68rpx};\r\n                text-align: center;\r\n                padding: 0 #{30rpx};\r\n                border-radius: #{40rpx};\r\n                color: #fff;\r\n                font-size: #{28rpx};\r\n                &.over {\r\n                    background-color: #f7f7f7;\r\n                    color: #999999;\r\n                }\r\n            }\r\n            .rewards-detail {\r\n                height: #{68rpx};\r\n                line-height: #{68rpx};\r\n                text-align: center;\r\n                padding: 0 #{30rpx};\r\n                border-radius: #{40rpx};\r\n                background-color: #fff;\r\n                font-size: #{28rpx};\r\n                border: #{2rpx} solid;\r\n                margin-right: #{18rpx};\r\n            }\r\n        }\r\n    }\r\n    .placeholder {\r\n        height: #{178rpx};\r\n        width: 100%;\r\n    }\r\n\r\n    .apply {\r\n        position: fixed;\r\n        bottom: 0;\r\n        left: 0;\r\n        z-index: 2;\r\n        height: #{154rpx};\r\n        width: 100%;\r\n        background-color: #fff;\r\n        padding-top: #{26rpx};\r\n        padding-left: #{24rpx};\r\n        .apply-btn {\r\n            width: #{702rpx};\r\n            height: #{88rpx};\r\n            line-height: #{88rpx};\r\n            border-radius: #{44rpx};\r\n            text-align: center;\r\n            color: #fff;\r\n            font-size: #{32rpx};\r\n        }\r\n    }\r\n</style>","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=style&index=0&id=1ff31c40&scoped=true&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=style&index=0&id=1ff31c40&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1611297827682\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}