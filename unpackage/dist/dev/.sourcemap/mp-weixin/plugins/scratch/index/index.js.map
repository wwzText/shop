{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/26439/Desktop/shop4.3.57_1/plugins/scratch/index/index.vue?552b","webpack:///C:/Users/26439/Desktop/shop4.3.57_1/plugins/scratch/index/index.vue?307c","webpack:///C:/Users/26439/Desktop/shop4.3.57_1/plugins/scratch/index/index.vue?4921","webpack:///C:/Users/26439/Desktop/shop4.3.57_1/plugins/scratch/index/index.vue?7344","uni-app:///plugins/scratch/index/index.vue","webpack:///C:/Users/26439/Desktop/shop4.3.57_1/plugins/scratch/index/index.vue?2045","webpack:///C:/Users/26439/Desktop/shop4.3.57_1/plugins/scratch/index/index.vue?c691"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,uG;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA+lB,CAAgB,ynBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsGnnB,gD;;AAEA;AACA,eADA;AAEA,4DAFA;AAGA;AACA;AACA,sFADA;AAEA,gEAFA,GADA,CAHA;;;AASA,MATA,kBASA;AACA;AACA;AACA,cADA;AAEA,wBAFA;AAGA,gBAHA;AAIA,gBAJA;AAKA,gBALA;AAMA,gBANA;AAOA,kBAPA;AAQA,kBARA;AASA,cATA;AAUA,mBAVA;AAWA,gBAXA;AAYA,cAZA;AAaA,aAbA,EAaA;AACA,oBAdA;AAeA,qBAfA;AAgBA,oBAhBA;AAiBA,sBAjBA;AAkBA,qBAlBA;AAmBA,sCAnBA;AAoBA,0BApBA,EAoBA;AACA,sBArBA;AAsBA,0BAtBA;AAuBA,WAvBA;AAwBA,wBAxBA;;AA0BA,GArCA;AAsCA;AACA,aADA,qBACA,GADA,EACA,MADA,EACA;AACA;AACA;AACA;AACA,KALA,EAtCA;;AA6CA;AACA;AACA,GA/CA;AAgDA;AACA;AACA,GAlDA;AAmDA;AACA;AACA,iDADA;AAEA,0CAFA;AAGA,gBAHA;;AAKA,GAzDA;;AA2DA,QA3DA,oBA2DA;AACA;AACA;AACA;AACA,kCADA;AAEA,QAFA,CAEA;AACA;AACA;AACA;AACA,6FADA,CACA,QADA,WACA,YADA,WACA,UADA,WACA,SADA;AAEA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KAZA;;AAcA;AACA;AACA;AACA,KAFA,EAEA,KAFA;AAGA,GAhFA;;AAkFA;AACA,YADA,sBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KARA;;AAUA,SAVA,mBAUA;AACA;AACA,KAZA;AAaA,QAbA,kBAaA;AACA;AACA,KAfA;AAgBA,SAhBA,mBAgBA;AACA;AACA,KAlBA;AAmBA,SAnBA,mBAmBA;AACA;AACA;AACA,kJADA;;AAGA,KAxBA;;AA0BA,aA1BA,uBA0BA;AACA;AACA;AACA,qCADA;AAEA,UAFA,CAEA;AACA;AACA;AACA;AACA,OANA;AAOA,KAnCA;;AAqCA,WArCA,qBAqCA;AACA,kBADA;AAEA,qEAFA,CAEA,gBAFA,YAEA,SAFA,YAEA,aAFA;AAGA,KAxCA;;AA0CA,QA1CA,kBA0CA;AACA,sBADA;AAEA,mBAFA,CAEA,aAFA,YAEA,YAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAHA;AAIA,kCAJA,CAIA,UAJA,YAIA,UAJA,YAIA,SAJA,YAIA,SAJA,YAIA,SAJA,YAIA,SAJA;AAKA,yCALA,CAKA,MALA,YAKA,gBALA,YAKA,iBALA;;AAOA;AACA;AACA;AACA;AACA;AACA,WAFA;AAGA,SAbA;AAcA,OAjBA;AAkBA,KAjEA;;AAmEA;AACA,YApEA,oBAoEA,CApEA,EAoEA,CApEA,EAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA,MAKA;AACA,wBADA,CACA,SADA,YACA,SADA,YACA,SADA,YACA,SADA;AAEA,OAZA;AAaA,cAbA,CAaA,UAbA,YAaA,UAbA;AAcA;AACA,KAnFA;;AAqFA;AACA,YAtFA,oBAsFA,CAtFA,EAsFA,CAtFA,EAsFA,SAtFA,EAsFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KApGA;;AAsGA;AACA,cAvGA,sBAuGA,CAvGA,EAuGA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,KA/GA;;AAiHA,aAjHA,qBAiHA,CAjHA,EAiHA;AACA;AACA;AACA;AACA;AACA;AACA,KAvHA;;AAyHA,YAzHA,oBAyHA,CAzHA,EAyHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCADA;AAEA;AACA,4BADA,EAFA;;AAKA,YALA,CAKA;AACA;AACA,4BADA;AAEA,0EAFA,CAEA,QAFA,YAEA,YAFA,YAEA,UAFA,YAEA,eAFA;AAGA,wCAHA,CAGA,aAHA,YAGA,aAHA;AAIA,WAJA,MAIA;AACA;AACA;AACA;AACA;AACA,SAfA;AAgBA;AACA,KAvJA,EAlFA,E;;;;;;;;;;;;;ACxGA;AAAA;AAAA;AAAA;AAAynC,CAAgB,mmCAAG,EAAC,C;;;;;;;;;;;ACA7oC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"plugins/scratch/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './plugins/scratch/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=38743433&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=38743433&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38743433\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"plugins/scratch/index/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=38743433&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n    <view class=\"app-layout\">\r\n        <app-layout :haveBackground=\"false\">\r\n            <view class=\"scratch\">\r\n                <view class=\"bg\" :style=\"{'background-image': `url(${setting.bg_pic})`}\"></view>\r\n                <view class=\"scratch-head\">\r\n                    <view class=\"s-h\" @click=\"rules\">规则</view>\r\n                    <view class=\"s-h\" @click=\"share\">分享</view>\r\n                    <app-share-qr-code-poster v-model=\"shareShow\" :url=\"poster\" title=\"生成海报\"></app-share-qr-code-poster>\r\n                </view>\r\n                <view class=\"scratch-oppty\">\r\n                    <view>您还有\r\n                        <text>{{oppty}}</text>\r\n                        次抽奖机会\r\n                    </view>\r\n                </view>\r\n                <view class=\"container\">\r\n                    <image class=\"image-bg-a\" src=\"./../image/scratch_border_bg.png\" load-lazy></image>\r\n                    <image id='frame' class=\"image-bg-b\" src=\"./../image/scratch_border.png\"\r\n                           load-lazy></image>\r\n                    <view v-if=\"is_integral\">\r\n                        <image class=\"image-bg-b\" src=\"./../image/scratch_hide.png\" load-lazy></image>\r\n                        <view @click=\"register\" class=\"image-bg-c\">{{setting.deplete_integral_num}}积分刮一次</view>\r\n                    </view>\r\n                    <view v-else class=\"integral-show\">\r\n                        <view class=\"scratch-award main-center\" :hidden=\"shareShow || userLoginShow\">\r\n                            <!--头条小程序不支持action -->\r\n                            <canvas v-if=\"is_start\"\r\n                                    class=\"scratch-canvas\"\r\n                                    id=\"scratch\"\r\n                                    canvas-id=\"scratch\"\r\n                                    @touchstart=\"touchStart\"\r\n                                    @touchmove=\"touchMove\"\r\n                                    @touchend=\"touchEnd\"\r\n                                    disable-scroll></canvas>\r\n                            <view v-if=\"is_name\" class=\"award-name\">\r\n                                <text>{{list.name}}</text>\r\n                                <app-button v-if=\"oppty > 0\" @click=\"onStart\" background=\"#f05525\" height=\"80\"\r\n                                            width=\"400\"\r\n                                            color=\"#FFFFFF\" font-size=\"32\" round>再刮一次\r\n                                </app-button>\r\n                                <app-button v-if=\"oppty == 0\" @click=\"onStart\" background=\"#cdcdcd\" height=\"80\"\r\n                                            width=\"400\"\r\n                                            color=\"#FFFFFF\" font-size=\"32\" round>再刮一次\r\n                                </app-button>\r\n                            </view>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n                <view class=\"dir-left-nowrap main-center cross-center end\">\r\n                    <view @click=\"home\" class=\"dir-left-nowrap cross-center box-grow-0 left\">\r\n                        <icon class=\"end-icon home\"></icon>\r\n                        <view>回到首页</view>\r\n                    </view>\r\n                    <view @click=\"prize\" class=\"dir-left-nowrap cross-center box-grow-0\">\r\n                        <view>我的中奖记录</view>\r\n                        <icon class=\"end-icon price\"></icon>\r\n                    </view>\r\n                </view>\r\n                <view class=\"prize\">\r\n                    <view class=\"dir-left-nowrap cross-center main-center\">\r\n                        <view class=\"line\"></view>\r\n                        <view class=\"text\">中奖名单</view>\r\n                        <view class=\"line\"></view>\r\n                    </view>\r\n                    <swiper duration=\"500\" vertical=\"true\" autoplay=\"false\" class=\"scratch-swiper\">\r\n                        <swiper-item>\r\n                            <block v-for=\"v in logs\" :key=\"v.id\">\r\n                                <view class=\"scratch-item\">{{v.create_time}} {{v.user}} {{v.name}}</view>\r\n                            </block>\r\n                        </swiper-item>\r\n                    </swiper>\r\n                </view>\r\n            </view>\r\n\r\n            <!-- 弹窗 -->\r\n            <view v-if=\"is_award\">\r\n                <view class=\"act-modal\">\r\n                    <view class=\"act-modal-bg\"></view>\r\n                    <view class=\"act-modal-pic cross-center main-center\">\r\n                        <view class=\"success main-center\">\r\n                            <icon class=\"image-bg\" :style=\"{'background-image': `url(${appImg.scratch_win})`}\">></icon>\r\n                            <view class=\"dir-top-nowrap name main-center\">\r\n                                <view>恭喜获得</view>\r\n                                <text class=\"main-center\">{{list.name}}</text>\r\n                            </view>\r\n                        </view>\r\n                        <view class=\"act-modal-end dir-top-nowrap cross-center main-center\">\r\n                            <app-button @click=\"onStart\" height=\"72\" width=\"320\" color=\"#FFFFFF\" background=\"#f05525\"\r\n                                        round>再刮一次\r\n                            </app-button>\r\n                            <view class=\"act-zh\">奖品已放入您的账号</view>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n        </app-layout>\r\n    </view>\r\n</template>\r\n\r\n<script>\r\nimport appShareQrCodePoster from '../../../components/page-component/app-share-qr-code-poster/app-share-qr-code-poster';\r\nimport {mapState} from 'vuex';\r\n\r\nexport default {\r\n    name: \"index\",\r\n    components: {appShareQrCodePoster},\r\n    computed: {\r\n        ...mapState({\r\n            appImg: state => state.mallConfig.plugin.scratch.app_image,\r\n            userInfo: state => state.user.info,\r\n        }),\r\n    },\r\n    data() {\r\n        let ctx, interval, minX, minY, maxX, maxY, lastX, lastY;\r\n        return {\r\n            ctx,\r\n            interval,\r\n            minX,\r\n            minY,\r\n            maxX,\r\n            maxY,\r\n            lastX,\r\n            lastY,\r\n            logs: [],\r\n                setting: null,\r\n                list: null,\r\n                oppty: 0,\r\n                msg: '', //错误信息\r\n                is_start: true,\r\n                is_award: false,\r\n                is_name: false,\r\n                extra_list: null,\r\n                touch_end: true,\r\n                poster: this.$api.scratch.poster,\r\n                poster_status: false, //hide model\r\n                shareShow: false,\r\n                userLoginShow: false,\r\n                r: 16,\r\n                is_integral: false,\r\n            }\r\n        },\r\n        watch: {\r\n            shareShow(val, oldVal) {\r\n                if (val === false && oldVal === true) {\r\n                    this.init();\r\n                }\r\n            }\r\n        },\r\n        onUnload: function () {\r\n            clearInterval(this.interval);\r\n        },\r\n        onHide: function () {\r\n            clearInterval(this.interval);\r\n        },\r\n        onShareAppMessage: function () {\r\n            return this.$shareAppMessage({\r\n                title: this.$children[0].navigationBarTitle,\r\n                path: '/plugins/scratch/index/index',\r\n                params: {}\r\n            });\r\n        },\r\n\r\n        onShow() {\r\n            const self = this;\r\n            self.$showLoading({title: '加载中'});\r\n            self.$request({\r\n                url: self.$api.scratch.index,\r\n            }).then(info => {\r\n                self.$hideLoading();\r\n                self.is_award = false;\r\n                if (info.data) {\r\n                    [self.msg, self.setting, self.oppty, self.list] = [info.code === 1 ? info.msg : '', info.data.setting, info.data.oppty, info.data.list];\r\n                    self.is_integral = self.setting.deplete_integral_num > 0;\r\n                } else {\r\n                    uni.showToast({'title': info.msg, icon: 'none'});\r\n                }\r\n                self.init();\r\n            });\r\n\r\n            self.prizeList();\r\n            self.interval = setInterval(() => {\r\n                self.prizeList();\r\n            }, 10000)\r\n        },\r\n\r\n        methods: {\r\n            register() {\r\n                if (this.msg) {\r\n                    uni.showToast({icon: `none`, title: this.msg});\r\n                    return;\r\n                }\r\n                this.is_integral = false;\r\n                this.init();\r\n            },\r\n\r\n            share() {\r\n                this.shareShow = true;\r\n            },\r\n            home() {\r\n                uni.redirectTo({url: `/pages/index/index`});\r\n            },\r\n            prize() {\r\n                uni.navigateTo({url: `/plugins/scratch/prize/prize`});\r\n            },\r\n            rules() {\r\n                // uni.navigateTo({url: `/plugins/scratch/rule/rule`});\r\n                uni.navigateTo({\r\n                    url: `/pages/rules/index?url=${encodeURIComponent(this.$api.scratch.setting)}&keys=${JSON.stringify(['setting', 'rule'])}`,\r\n                });\r\n            },\r\n\r\n            prizeList() {\r\n                const self = this;\r\n                self.$request({\r\n                    url: self.$api.scratch.record,\r\n                }).then(info => {\r\n                    if (info.code === 0) {\r\n                        self.logs = info.data;\r\n                    }\r\n                })\r\n            },\r\n\r\n            onStart() {\r\n                this.init();\r\n                [this.is_integral, this.list, this.is_award] = [this.setting.deplete_integral_num > 0, this.extra_list, false];\r\n            },\r\n\r\n            init() {\r\n                const self = this;\r\n                [self.is_start, self.is_name] = [true, false];\r\n\r\n                //Promise\r\n                setTimeout(() => {\r\n                    let query = uni.createSelectorQuery();\r\n                    query.select('#frame').boundingClientRect();\r\n                    query.exec((res) => {\r\n                        const canvasWidth = res[0].width;\r\n                        const canvasHeight = res[0].height;\r\n                        let imageResource = './../image/scratch_hide.png';\r\n                        [self.lastX, self.lastY, self.minX, self.minY, self.maxX, self.maxY] = ['', '', '', '', '', ''];\r\n                        [self.r, self.canvasWidth, self.canvasHeight] = [16, canvasWidth, canvasHeight]\r\n\r\n                        let ctx = uni.createCanvasContext('scratch');\r\n                        ctx.drawImage(imageResource, 0, 0, canvasWidth, canvasHeight);\r\n                        self.ctx = ctx;\r\n                        ctx.draw(true, (e) => {\r\n                            self.is_name = true;\r\n                        })\r\n                    })\r\n                })\r\n            },\r\n\r\n            //\r\n            drawRect(x, y) {\r\n                const self = this;\r\n                const r = self.r / 2;\r\n                const x1 = x - r > 0 ? x - r : 0\r\n                const y1 = y - r > 0 ? y - r : 0\r\n                if ('' !== self.minX) {\r\n                    self.minX = self.minX > x1 ? x1 : self.minX;\r\n                    self.minY = self.minY > y1 ? y1 : self.minY;\r\n                    self.maxX = self.maxX > x1 ? self.maxX : x1;\r\n                    self.maxY = self.maxY > y1 ? self.maxY : y1;\r\n                } else {\r\n                    [self.minX, self.minY, self.maxX, self.maxY] = [x1, y1, x1, y1];\r\n                }\r\n                [self.lastX, self.lastY] = [x1, y1];\r\n                return [x1, y1, 2 * r]\r\n            },\r\n\r\n            // 绘图\r\n            clearArc(x, y, stepClear) {\r\n                let r = this.r;\r\n                let ctx = this.ctx;\r\n                let calcWidth = r - stepClear;\r\n                let calcHeight = Math.sqrt(r * r - calcWidth * calcWidth);\r\n                let posX = x - calcWidth;\r\n                let posY = y - calcHeight;\r\n                let widthX = 2 * calcWidth;\r\n                let heightY = 2 * calcHeight;\r\n                if (stepClear <= r) {\r\n                    ctx.clearRect(posX, posY, widthX, heightY);\r\n                    stepClear += 2;\r\n                    this.clearArc(x, y, stepClear);\r\n                }\r\n            },\r\n\r\n            //action\r\n            touchStart(e) {\r\n                const self = this;\r\n                if (self.msg === 'User ID不能为空。') {\r\n                    this.userLoginShow = true;\r\n                    self.$store.dispatch('user/info');\r\n                } else if (self.msg) {\r\n                    uni.showToast({icon: 'none', title: self.msg})\r\n                }\r\n            },\r\n\r\n            touchMove(e) {\r\n                if (!this.is_start || this.msg) return;\r\n                let stepClear = 2;\r\n                this.drawRect(e.touches[0].x, e.touches[0].y)\r\n                this.clearArc(e.touches[0].x, e.touches[0].y, stepClear)\r\n                this.ctx.draw(true)\r\n            },\r\n\r\n            touchEnd(e) {\r\n                const self = this;\r\n                if (!self.is_start || self.msg) return;\r\n                //自动清楚采用点范围值方式判断\r\n                let canvasWidth = self.canvasWidth;\r\n                let canvasHeight = self.canvasHeight;\r\n                let minX = self.minX;\r\n                let minY = self.minY;\r\n                let maxX = self.maxX;\r\n                let maxY = self.maxY;\r\n                if (maxX - minX > .4 * canvasWidth && maxY - minY > .4 * canvasHeight && self.touch_end) {\r\n                    self.touch_end = false;\r\n\r\n                    self.$request({\r\n                        url: self.$api.scratch.receive,\r\n                        data: {\r\n                            id: self.list.id\r\n                        }\r\n                    }).then(info => {\r\n                        if (info.code === 0) {\r\n                            self.ctx.draw();\r\n                            [self.msg, self.setting, self.oppty, self.extra_list] = [info.msg, info.data.setting, info.data.oppty, info.data.list];\r\n                            [self.is_start, self.is_award] = [false, self.list.type != 5];\r\n                        } else {\r\n                            uni.showToast({icon: 'none', content: info.msg});\r\n                            self.onStart();\r\n                        }\r\n                        self.touch_end = true;\r\n                    });\r\n                }\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n    .app-layout /deep/ .app-layout {\r\n        background: #5e00b8;\r\n        min-height: calc(100vh - var(--window-top));\r\n    }\r\n    .scratch-canvas {\r\n        width: #{600rpx};\r\n        height: #{320rpx};\r\n        position: absolute;\r\n        left: 0;\r\n        z-index: 1;\r\n    }\r\n\r\n    .scratch {\r\n        text-align: center;\r\n        padding-bottom: #{1rpx};\r\n        .bg {\r\n            position: absolute;\r\n            left: 0;\r\n            top: 0;\r\n            height: calc(100vh - var(--window-top));\r\n            width: #{100%};\r\n            display: block;\r\n            background-repeat: no-repeat;\r\n            background-size: 100% 100%;\r\n        }\r\n\r\n        .scratch-head {\r\n            .s-h {\r\n                color: #FFFFFF;\r\n                font-size: $uni-font-size-weak-one;\r\n                background: #000000;\r\n                text-align: center;\r\n                background-color: rgba(0, 0, 0, 0.3);\r\n                line-height: #{48rpx};\r\n                width: #{92rpx};\r\n                border-radius: #{24rpx} 0 0 #{24rpx};\r\n                position: absolute;\r\n                right: 0;\r\n                z-index: 1;\r\n                top: #{40rpx};\r\n            }\r\n\r\n            .s-h:nth-child(2) {\r\n                top: #{112rpx}\r\n            }\r\n        }\r\n\r\n        .scratch-oppty {\r\n            line-height: #{56rpx};\r\n            font-size: #{28rpx};\r\n            padding-top: #{380rpx};\r\n            position: relative;\r\n            view {\r\n                color: #ffffff;\r\n                padding: 0 #{30rpx};\r\n                display: inline-block;\r\n                background: rgba(0, 0, 0, 0.3);;\r\n                border-radius: #{28rpx};\r\n            }\r\n\r\n            text {\r\n                color: #ffb92a;\r\n            }\r\n        }\r\n\r\n        .container {\r\n            position: relative;\r\n            margin-top: #{40rpx};\r\n            margin-bottom: #{48rpx};\r\n            height: #{360rpx};\r\n            width: 100%;\r\n\r\n            .image-bg-a {\r\n                height: #{360rpx};\r\n                width: #{654rpx};\r\n            }\r\n\r\n            .image-bg-b {\r\n                height: #{320rpx};\r\n                width: #{600rpx};\r\n                position: absolute;\r\n                top: #{20rpx};\r\n                left: 50%;\r\n                -webkit-transform: translate(-50%, -50%);\r\n                transform: translate(-50%, 0);\r\n            }\r\n\r\n            .image-bg-c {\r\n                position: absolute;\r\n                top: #{150rpx};\r\n                left: 50%;\r\n                -webkit-transform: translate(-50%, -50%);\r\n                transform: translate(-50%, 0);\r\n                line-height: #{80rpx};\r\n                background: #f05525;\r\n                border-radius: #{40rpx};\r\n                padding: 0 #{48rpx};\r\n                color: #ffffff;\r\n            }\r\n        }\r\n\r\n\r\n        .end {\r\n            position: relative;\r\n            color: #FFFFFF;\r\n            font-size: #{28rpx};\r\n\r\n            .left {\r\n                margin-right: #{160rpx};\r\n            }\r\n\r\n            .end-icon {\r\n                background-repeat: no-repeat;\r\n                background-size: 100% 100%;\r\n                margin: 0 #{16rpx};\r\n            }\r\n\r\n            .end-icon.home {\r\n                height: #{30rpx};\r\n                width: #{30rpx};\r\n                background-image: url('../../../static/image/icon/icon-home-white.png');\r\n            }\r\n\r\n            .end-icon.price {\r\n                height: #{22rpx};\r\n                width: #{12rpx};\r\n                background-image: url('../../../static/image/icon/arrow-right-white.png');\r\n            }\r\n        }\r\n\r\n        .prize {\r\n            position: relative;\r\n            height: #{186rpx};\r\n            width: #{654rpx};\r\n            background: #420080;\r\n            display: inline-block;\r\n            border-radius: #{16rpx};\r\n            text-align: left;\r\n            padding-top: #{26rpx};\r\n            margin-top: #{48rpx};\r\n\r\n            .line {\r\n                height: #{1px};\r\n                width: #{120rpx};\r\n                background: #FFFFFF;\r\n            }\r\n\r\n            .text {\r\n                padding: 0 #{40rpx};\r\n                color: #FFFFFF;\r\n                font-size: #{28rpx};\r\n                padding-bottom:#{12rpx};\r\n            }\r\n\r\n            .scratch-swiper {\r\n                height: #{110rpx};\r\n                font-size: #{24rpx};\r\n                color: #ffffff;\r\n            }\r\n\r\n            .scratch-item {\r\n                line-height: #{40rpx};\r\n                padding: 0 #{50rpx};\r\n                display: inline-block;\r\n                white-space: nowrap;\r\n                width: 100%;\r\n                overflow: hidden;\r\n                text-overflow: ellipsis;\r\n            }\r\n        }\r\n\r\n        .integral-show {\r\n            position: absolute;\r\n            top: #{20rpx};\r\n            left: 50%;\r\n            -webkit-transform: translate(-50%, -50%);\r\n            transform: translate(-50%, 0);\r\n            width: #{600rpx};\r\n            height: #{320rpx};\r\n\r\n            .scratch-award {\r\n                width: 100%;\r\n                height: 100%;\r\n\r\n                canvas {\r\n\r\n                }\r\n\r\n                .award-name {\r\n                    text {\r\n                        width: #{410rpx};\r\n                        color: #f05525;\r\n                        font-size: #{36rpx};\r\n                        margin-bottom: #{40rpx};\r\n                        margin-top: #{88rpx};\r\n                        overflow: hidden;\r\n                        text-overflow: ellipsis;\r\n                        display: -webkit-box;\r\n                        -webkit-line-clamp: 1;\r\n                        -webkit-box-orient: vertical;\r\n                    }\r\n\r\n                    view {\r\n\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        .scraxtch-award {\r\n\r\n\r\n            view {\r\n                width: #{400rpx};\r\n                line-height: #{80rpx};\r\n                color: #ffffff;\r\n                margin-top: #{40rpx};\r\n                border-radius: #{40rpx};\r\n            }\r\n\r\n            .next {\r\n                background: #f05525;\r\n            }\r\n\r\n            .none {\r\n                background: #cdcdcd;\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    .act-modal {\r\n        position: fixed;\r\n        left: 0;\r\n        top: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        z-index: 2001;\r\n        transition: 200ms;\r\n\r\n        .show {\r\n            visibility: visible;\r\n            opacity: 1;\r\n        }\r\n\r\n        .act-modal-bg {\r\n            background: rgba(0, 0, 0, 0.5);\r\n            position: fixed;\r\n            left: 0;\r\n            top: 0;\r\n            width: 100%;\r\n            height: 100%;\r\n            z-index: 1;\r\n        }\r\n\r\n        .act-modal-pic {\r\n            background: rgba(0, 0, 0, 0.25);\r\n            position: fixed;\r\n            left: 0;\r\n            top: 0;\r\n            width: 100%;\r\n            height: 100%;\r\n            z-index: 1;\r\n        }\r\n\r\n        .success {\r\n            position: absolute;\r\n            top: 0;\r\n            width: 100%;\r\n            left: 0;\r\n\r\n            .image-bg {\r\n                height: #{731rpx};\r\n                width: 100%;\r\n                background-repeat: no-repeat;\r\n                background-size: 100% 100%;\r\n            }\r\n\r\n            .name {\r\n                position: absolute;\r\n                top: #{540rpx};\r\n                font-size: #{32rpx};\r\n                color: #f05525;\r\n                left: 50%;\r\n                right: 0;\r\n                text-align: center;\r\n                -webkit-transform: translate(-50%, 0);\r\n                transform: translate(-50%, 0);\r\n\r\n                view {\r\n                    padding-bottom: #{10rpx};\r\n                }\r\n\r\n                text {\r\n                    //text-align: left;\r\n                }\r\n            }\r\n        }\r\n\r\n        .act-modal-end {\r\n            position: absolute;\r\n            top: #{730rpx};\r\n            border-bottom: #{10rpx} solid #ffb947;\r\n            border-radius: 0 0 #{24rpx} #{24rpx};\r\n            border-left: #{10rpx} solid #ffb947;\r\n            border-right: #{10rpx} solid #ffb947;\r\n            width: #{490rpx};\r\n            background: #ffffff;\r\n            height: #{160rpx};\r\n            left: 0;\r\n            right: 0;\r\n            margin: 0 auto;\r\n\r\n            .act-zh {\r\n                margin-top: #{24rpx};\r\n                font-size: #{24rpx};\r\n                color: #999999;\r\n            }\r\n        }\r\n    }\r\n</style>","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=38743433&scoped=true&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=38743433&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1608184820732\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}