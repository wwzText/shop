{"version":3,"sources":["uni-app:///main.js","webpack:////Users/wanglong/Desktop/shop4.3.57/pages/search/search.vue?5cbd","webpack:////Users/wanglong/Desktop/shop4.3.57/pages/search/search.vue?ee5b","webpack:////Users/wanglong/Desktop/shop4.3.57/pages/search/search.vue?d25e","webpack:////Users/wanglong/Desktop/shop4.3.57/pages/search/search.vue?0f03","uni-app:///pages/search/search.vue","webpack:////Users/wanglong/Desktop/shop4.3.57/pages/search/search.vue?e6e2","webpack:////Users/wanglong/Desktop/shop4.3.57/pages/search/search.vue?a731"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,iG;AACAA,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACsC;;;AAG3F;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAqzB,CAAgB,oyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqGz0B,gD;;;AAGA;AACA;AACA,uB;;AAEA;AACA,gBADA;AAEA;AACA,gCADA,EAFA;;AAKA,MALA,kBAKA;AACA;AACA,sBADA;AAEA,cAFA;AAGA,qBAHA;AAIA,qBAJA;AAKA,iBALA;AAMA,wBANA;AAOA,eAPA;AAQA,sBARA;AASA,kBATA;AAUA,yBAVA;AAWA,oBAXA;AAYA,uBAZA;;AAcA,GApBA;AAqBA;AACA;AACA,wBADA;AAEA,4BAFA,GADA;;AAKA,WALA,qBAKA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAXA;AAYA,iBAZA,2BAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YADA,EACA,gBADA,EACA,wBADA,EACA,kBADA,EACA,oBADA;;AAGA,KAtBA;AAuBA;AACA;AACA,wDADA;AAEA,4BAFA;AAGA,yDAHA;AAIA,yDAJA;;AAMA,KA9BA;AA+BA;AACA,8HADA,GA/BA,CArBA;;;AAwDA,QAxDA,kBAwDA,OAxDA,EAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAjEA;AAkEA,eAlEA,2BAkEA;AACA;;AAEA,KAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GA5EA;AA6EA;AACA;AACA,aADA,mBACA,CADA,EACA;AACA;AACA;AACA;AACA,OALA;AAMA,qBANA,EADA,EA7EA;;;AAuFA;AACA,aADA,uBACA;AACA,2BADA,GACA,iBADA;AAEA;AACA,sBADA,GACA,KADA;AAEA;;;;;AAKA;;AAEA;AACA,gCADA;AAEA;AACA;AACA;AACA;AACA,uBAFA,MAEA;AACA;AACA;AACA,qBATA,EASA,IATA;AAUA,mBAjBA,EAiBA,GAjBA;AAkBA,iBAtBA;AAuBA,KAxBA;AAyBA,cAzBA,sBAyBA,GAzBA,EAyBA;AACA;AACA,yCAFA;AAGA,wBAHA,CAGA,WAHA,uBAGA,WAHA,CAGA,SAHA,uBAGA,SAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAvDA;;AAyDA,mBAzDA,2BAyDA,GAzDA,EAyDA;AACA,sBADA;AAEA,wBAFA,CAEA,QAFA,wBAEA,QAFA,CAEA,SAFA,wBAEA,SAFA,CAEA,WAFA,wBAEA,WAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA;AAMA;AACA,oBADA;;AAGA;AACA;AACA,OAfA,MAeA;AACA;AACA;AACA;AACA;AACA;AACA,KAnFA;;AAqFA,iBArFA,2BAqFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA/FA;AAgGA,YAhGA,oBAgGA,GAhGA,EAgGA;AACA;AACA,KAlGA;AAmGA,SAnGA,mBAmGA;AACA;AACA;AACA;AACA,KAvGA;AAwGA,gBAxGA,0BAwGA;AACA;AACA;AACA;AACA;AACA,uCADA;AAEA,UAFA,CAEA;AACA;AACA,OAJA;AAKA,KAjHA;AAkHA,UAlHA,oBAkHA;AACA;AACA;AACA;AACA;AACA,KAvHA;AAwHA,SAxHA,mBAwHA;AACA;AACA;AACA;AACA;AACA,KA7HA;AA8HA,UA9HA,oBA8HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KArIA;AAsIA,gBAtIA,0BAsIA;AACA;AACA;AACA;AACA;AACA,yCADA;AAEA;AACA,+BADA;AAEA,6BAFA;AAGA,oBAHA,EAFA;;AAOA,UAPA,CAOA;AACA;AACA;AACA,+BAHA;AAIA,YAJA,GAIA,QAJA,CAIA,IAJA,CAIA,IAJA,GAIA,QAJA,CAIA,IAJA,CAIA,GAJA,GAIA,QAJA,CAIA,GAJA;AAKA;AACA;AACA;AACA;AACA;AACA,WAHA,MAGA;AACA;AACA;AACA;AACA,SATA,MASA;AACA;AACA,wBADA;;AAGA;AACA,OA1BA,EA0BA,KA1BA,CA0BA;AACA;AACA,OA5BA;AA6BA,KAvKA;AAwKA,cAxKA,wBAwKA;AACA;AACA;;AAEA;AACA;AACA,OAFA;AAGA;AACA,wBADA;;AAGA;AACA;AACA;AACA,KArLA;AAsLA,cAtLA,wBAsLA;AACA;AACA;AACA;AACA,KA1LA;AA2LA,iBA3LA,2BA2LA;AACA;AACA;AACA,8BADA;AAEA;AACA;AACA;AACA;AACA;AACA,SAPA;;AASA,KAtMA;AAuMA,gBAvMA,wBAuMA,OAvMA,EAuMA;AACA;AACA;AACA,KA1MA;AA2MA,gBA3MA,0BA2MA;AACA;AACA;AACA;AACA,0CADA;AAEA;AACA,qBADA;AAEA,uBAFA,EAFA;;AAMA,UANA,CAMA;AACA;AACA,OARA;AASA,KAvNA,EAvFA,E;;;;;;;;;;;;;AC5GA;AAAA;AAAA;AAAA;AAA0/C,CAAgB,s5CAAG,EAAC,C;;;;;;;;;;;ACA9gD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/search/search.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/search/search.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./search.vue?vue&type=template&id=4cedc0c6&scoped=true&\"\nvar renderjs\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=4cedc0c6&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cedc0c6\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/search/search.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=template&id=4cedc0c6&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"app-layout\" :style=\"{background: isSearch ? '#f7f7f7' : '#fafafa'}\">\n        <app-layout>\n            <view class=\"search\">\n                <view class=\"top\">\n                    <view class=\"dir-left-nowrap box\">\n                        <input type=\"text\" class=\"box-grow-1 input\" confirm-type=\"搜索\" @confirm=\"search\"\n                               v-model=\"keyword\">\n                        <view class=\"close-tip\" @click=\"clear\">\n                            <image class=\"search-close\" v-if=\"keyword\"\n                                   src=\"/static/image/icon/delete-yuan.png\"></image>\n                        </view>\n                        <view class=\"box-grow-0 cross-center\" @click=\"search\">搜索</view>\n                    </view>\n                </view>\n                <!-- hidden -->\n                <view style=\"height: 104rpx\"></view>\n                <view class=\"hot opacity-hide\">\n                    <view v-if=\"historyList.length > 0\" class=\"history\">\n                        <view class=\"dir-left-wrap list\">\n                            <block v-for=\"(item, index) in historyList\" :key=\"index\">\n                                <view class=\"box-grow-0 cross-center item once-item\">\n                                    <view class=\"t-omit\" style=\"max-width: 650rpx\">{{item.keyword}}</view>\n                                </view>\n                            </block>\n                        </view>\n                    </view>\n                </view>\n                <!-- -->\n                <view v-show=\"!isSearch\" class=\"hot\">\n                    <!-- 历史记录 -->\n                    <view v-if=\"historyList.length > 0\" class=\"history\">\n                        <view class=\"dir-left-nowrap cross-center title\">\n                            <view class=\"box-grow-1\">历史搜索</view>\n                            <image src=\"../../static/image/icon/delete.png\" class=\"box-grow-0\"\n                                   @click=\"deleteHistory\"></image>\n                        </view>\n                        <view class=\"dir-left-wrap list\">\n                            <view class=\"dir-top-nowrap\">\n                                <view v-for=\"(line, temp_index) in realHistoryList\" :key=\"temp_index\"\n                                      class=\"dir-left-wrap box-grow-1\">\n                                    <view v-for=\"(item, index) in line\" :key=\"index\" class=\"dir-left-wrap\">\n                                        <view v-if=\"!item.mark\" class=\"box-grow-0 cross-center item\"\n                                              @click=\"historyClick(item.keyword)\">\n                                            <view class=\"t-omit\" style=\"max-width: 650rpx\">{{item.keyword}}</view>\n                                        </view>\n                                        <view v-if=\"item.mark && temp_index === 1\"\n                                              class=\"box-grow-0 close-pic cross-center\"\n                                              @click=\"selectAllList\">\n                                            <image src=\"./image/icon_open.png\"></image>\n                                        </view>\n                                    </view>\n                                </view>\n                            </view>\n                        </view>\n                    </view>\n                    <!-- 热搜 -->\n                    <view class=\"hot-center\" v-if=\"getSetting.is_show_hot_goods == 1\">\n                        <image class=\"top-image\" src=\"./image/icon_top.png\"></image>\n                        <view class=\"top-list\" v-if=\"hotGoodsList && hotGoodsList.length\">\n                            <view v-for=\"(goods,index) in hotGoodsList\" :key=\"index\"\n                                  class=\"item cross-center dir-left-nowrap\"\n                                  @click=\"goodsNav(goods.url)\">\n                                <view class=\"box-grow-0 main-center first\">\n                                    <image v-if=\"goods.sort < 4\" :src=\"goods.sort === 1 ? './image/list_icon_first.png' :\n                                    goods.sort === 2 ? './image/list_icon_second.png' : './image/list_cion_third.png'\"></image>\n                                    <view v-if=\"goods.sort > 3\">{{goods.sort}}</view>\n                                </view>\n                                <view class=\"goods-image box-grow-0\">\n                                    <image :src=\"goods.cover_pic\"></image>\n                                </view>\n                                <view class=\"goods-name t-omit\">{{goods.title}}</view>\n                            </view>\n                        </view>\n                    </view>\n                </view>\n                <view v-if=\"isSearch\" class=\"goods-list\">\n                    <template v-if=\"list.length <= 0\">\n                        <view class=\"main-center no-result\">\n                            <view class=\"dir-left-nowrap cross-center\">\n                                <image class=\"box-grow-0 empty\" src=\"../../static/image/icon/empty.png\"></image>\n                                <view class=\"box-grow-1\">\n                                    <view>抱歉，没有相关商品</view>\n                                    <view v-if=\"!mch_id\" class=\"text\">以下是为您推荐的商品</view>\n                                </view>\n                            </view>\n                        </view>\n                    </template>\n                    <view style=\"background-color: #f7f7f7\">\n                        <u-ordinary-list :is-under-line-price=\"isListUnderlinePrice == 1 ? true : false\"\n                                         :theme-object=\"themeObject\" :reset=\"goodsReset\" :pagination=\"true\" :isShowAttr=\"true\" :list=\"newList\" :theme=\"getTheme\"\n                                         :list-style=\"2\"></u-ordinary-list>\n                    </view>\n                </view>\n                <view class=\"u-loading-list\" v-if=\"loading\">加载中...</view>\n            </view>\n        </app-layout>\n    </view>\n</template>\n\n<script>\nimport {mapGetters, mapState} from 'vuex';\nimport uOrdinaryList from '../../components/page-component/u-goods-list/u-ordinary-list.vue';\n\nlet page = 1;\nlet is_loading = false;\nlet is_no_more = false;\n\nexport default {\n    name: \"search\",\n    components: {\n        uOrdinaryList\n    },\n    data() {\n        return {\n            hotGoodsList: [],\n            list: [],\n            isSearch: false,\n            historyList: [],\n            keyword: '',\n            recommend_list: [],\n            mch_id: 0,\n            beginAfter: true,\n            tempList: [],\n            realHistoryList: [],\n            loading: false,\n            goodsReset: false\n        };\n    },\n    computed: {\n        ...mapGetters('mallConfig', {\n            getTheme: 'getTheme',\n            getSetting: 'getSetting',\n        }),\n        newList() {\n            if (this.list.length > 0) {\n                return this.list;\n            } else {\n                return this.recommend_list;\n            }\n        },\n        sizeTransform() {\n            const windowWidth = uni.getSystemInfoSync().windowWidth;\n            const p = 750 / windowWidth;\n            const boxLeft = 24 / p;\n            const marginRight = 20 / p;\n            const btnWidth = 60 / p;\n            const listWidth = windowWidth - boxLeft * 2;\n            return {\n                p, boxLeft, marginRight, btnWidth, listWidth\n            }\n        },\n        themeObject:function() {\n            return {\n                back: this.getTheme + '-m-back ' + this.getTheme,\n                theme: this.getTheme,\n                color: this.getTheme + '-m-text ' + this.getTheme,\n                sBack: this.getTheme + '-s-back ' + this.getTheme\n            }\n        },\n        ...mapState({\n            isListUnderlinePrice: state => state.mallConfig.mall.setting.is_list_underline_price\n        }),\n    },\n    onLoad(options) {\n        this.mch_id = options.mch_id ? options.mch_id : 0;\n        page = 1;\n        is_loading = false;\n        is_no_more = false;\n        this.historyList = this.getHistory();\n        this.getSelect();\n        this.getRecommend();\n        this.getHotSearch();\n    },\n    onReachBottom() {\n        if (is_no_more) {\n\n        } else {\n            this.goodsReset = false;\n            if (this.keyword) {\n                this.loading = true;\n                this.getGoodsList();\n            }\n        }\n    },\n    watch: {\n        keyword: {\n            handler(v) {\n                if (v == '') {\n                    this.cancel();\n                }\n            },\n            immediate: true,\n        }\n    },\n    methods: {\n        async getSelect() {\n            const historyList = this.historyList;\n            if (historyList && historyList.length) {\n                const self = this;\n                setTimeout(() => {\n                    // #ifndef MP-WEIXIN\n                    let query = uni.createSelectorQuery();\n                    // #endif\n                    // #ifdef MP-WEIXIN\n                    let query = uni.createSelectorQuery().in(this);\n                    // #endif\n                    query.selectAll('.once-item').fields({\n                        size: true,\n                    }, function (res) {\n                        self.formatData(res);\n                        if (self.beginAfter) {\n                            self.selectLimitList(res);\n                        } else {\n                            self.selectAllList();\n                        }\n                    }).exec();\n                },500)\n            }\n        },\n        formatData(res) {\n            const self = this;\n            const historyList = self.historyList;\n            const {marginRight, listWidth} = self.sizeTransform;\n\n            //列表格式化\n            let tempList = [];\n            let item = [];\n            let line_width = 0;\n            for (let i = 0; i < res.length; i++) {\n                const alone_width = res[i].width + marginRight;\n                let alone_width_count = alone_width + line_width;\n                if (alone_width_count <= listWidth) {\n                    item.push(historyList[i]);\n                    line_width = alone_width_count;\n                } else {\n                    if (item.length === 0 && line_width === 0) {\n                        tempList.push([historyList[i]]);\n                    } else {\n                        tempList.push(item);\n                        line_width = 0;\n                        item = [];\n                        i--;\n                    }\n                }\n            }\n            if (item.length) {\n                tempList.push(item);\n            }\n            this.tempList = tempList;\n        },\n\n        selectLimitList(res) {\n            const self = this;\n            const {btnWidth, listWidth, marginRight} = self.sizeTransform;\n            let newArr = JSON.parse(JSON.stringify(self.tempList));\n            let realHistoryList = [];\n            if (newArr.length > 2) {\n                let indexMore = 0;\n                const secondWidth = listWidth - btnWidth - marginRight;\n                let maxWidth = 0;\n                newArr[1].forEach((item, index) => {\n                    maxWidth += res[newArr[0].length + index].width + marginRight\n                    if (maxWidth <= secondWidth) {\n                        indexMore = index + 1;\n                    }\n                })\n                newArr[1].splice(indexMore, newArr[1].length - indexMore, {\n                    mark: true,\n                });\n                realHistoryList = [newArr[0], newArr[1]];\n                self.beginAfter = true;\n            } else {\n                //newArr.forEach(item => realHistoryList = [...realHistoryList, ...item]);\n                newArr.forEach(item => realHistoryList.push(item));\n                self.beginAfter = false;\n            }\n            self.realHistoryList = realHistoryList;\n        },\n\n        selectAllList() {\n            const tempList = this.tempList;\n            let arr = [];\n            if (tempList && tempList.length) {\n                for (let i = 0; i < 5 && i < tempList.length; i++) {\n                    arr.push(tempList[i]);\n                }\n            }\n            this.beginAfter = false;\n            this.realHistoryList = arr;\n        },\n        goodsNav(url) {\n            uni.navigateTo({url: url});\n        },\n        clear() {\n            uni.hideKeyboard()\n            this.keyword = '';\n            this.loading = false;\n        },\n        getHotSearch() {\n            if (this.getSetting.is_show_hot_goods != 1) {\n                return;\n            }\n            this.$request({\n                url: this.$api.goods.hot_search,\n            }).then(response => {\n                this.hotGoodsList = response.data.list;\n            });\n        },\n        cancel() {\n            this.isSearch = false;\n            this.loading = false;\n            this.keyword = '';\n            this.list = [];\n        },\n        reset() {\n            page = 1;\n            is_no_more = false;\n            this.goodsReset = true;\n            this.getGoodsList();\n        },\n        search() {\n            let keyword = this.keyword;\n            if (keyword === '') return;\n            this.keyword = keyword.trim();\n            this.setHistory();\n            this.getSelect();\n            this.reset();\n        },\n        getGoodsList() {\n            if (!this.keyword) return;\n            if (is_loading) return;\n            is_loading = true;\n            this.$request({\n                url: this.$api.default.goods_list,\n                data: {\n                    keyword: this.keyword,\n                    mch_id: this.mch_id,\n                    page: page,\n                }\n            }).then(response => {\n                is_loading = false;\n                this.isSearch = true;\n                this.loading = false;\n                let { code, data, msg } = response;\n                if (code === 0) {\n                    if (page === 1) this.list = [];\n                    if (data.list.length > 0) {\n                        this.list.push(...data.list);\n                        page++;\n                    } else {\n                        is_no_more = true;\n                        if (page === 1) this.getRecommend();\n                    }\n                } else {\n                    uni.showModal({\n                        content: msg\n                    })\n                }\n            }).catch(() => {\n                is_loading = false;\n            });\n        },\n        setHistory() {\n            let historyList = this.getHistory();\n            let keyword = this.keyword.trim();\n\n            historyList.forEach((item, index) => {\n                if (item.keyword === keyword) historyList.splice(index, 1);\n            });\n            historyList.unshift({\n                keyword: keyword,\n            });\n            if (historyList.length > 20) historyList.pop();\n            this.historyList = historyList;\n            uni.setStorageSync(\"SEARCH_HISTORY_LIST\", historyList);\n        },\n        getHistory() {\n            let historyList = uni.getStorageSync('SEARCH_HISTORY_LIST');\n            if (!historyList) historyList = [];\n            return historyList;\n        },\n        deleteHistory() {\n            let self = this;\n            uni.showModal({\n                content: '确认删除全部历史记录？',\n                success: function (res) {\n                    if (res.confirm) {\n                        uni.removeStorageSync(\"SEARCH_HISTORY_LIST\");\n                        self.historyList = [];\n                    }\n                }\n            });\n        },\n        historyClick(keyword) {\n            this.keyword = keyword.trim();\n            this.reset();\n        },\n        getRecommend() {\n            if (this.mch_id) return;\n            if (this.recommend_list.length > 0) return;\n            this.$request({\n                url: this.$api.goods.new_recommend,\n                data: {\n                    goods_id: 0,\n                    type: 'goods'\n                }\n            }).then(response => {\n                if (response.code === 0) this.recommend_list = response.data.list;\n            });\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n    .opacity-hide {\n        position: fixed;\n        top: var(--window-top);\n        z-index: -10;\n        opacity: 0;\n        overflow: hidden;\n    }\n\n    .search {\n        background-color: #efeff4;\n    }\n\n    .close-pic {\n        margin-right: #{20rpx};\n        margin-bottom: #{16rpx};\n        border-radius: 50%;\n\n        image {\n            height: #{60rpx};\n            width: #{60rpx};\n            display: block;\n        }\n    }\n\n    .hot {\n        background-color: #fafafa;\n        border-radius: #{16rpx};\n\n        .hot-center {\n            padding: #{32rpx} #{24rpx};\n\n            .top-image {\n                width: #{159rpx};\n                height: #{25rpx};\n                display: block;\n            }\n\n            .top-list {\n                margin-top: #{32rpx};\n                border-radius: #{16rpx};\n                padding: #{32rpx - 10rpx} 0;\n                box-shadow: 0 0 #{12rpx} 0 #e0e0e0;\n\n                .item {\n                    height: #{110rpx};\n\n                    .first {\n                        width: #{120rpx};\n                        font-weight: bold;\n\n                        image {\n                            width: #{48rpx};\n                            height: #{43rpx};\n                            display: block;\n                        }\n\n                        view {\n                            color: #999999;\n                            font-size: #{26rpx};\n                        }\n                    }\n\n                    .goods-image {\n                        image {\n                            height: #{90rpx};\n                            width: #{90rpx};\n                            display: block;\n                            border-radius: #{8rpx};\n                        }\n                    }\n\n                    .goods-name {\n                        color: #333333;\n                        font-size: #{26rpx};\n                        margin: 0 #{24rpx};\n                    }\n                }\n\n            }\n        }\n\n    }\n\n    .app-layout {\n        min-height: 100vh;\n    }\n\n    .top {\n        position: fixed;\n        width: 100%;\n        top: var(--window-top);\n        z-index: 15;\n        padding: #{20rpx} #{24rpx};\n        background-color: #efeff4;\n        font-size: $uni-font-size-import-two;\n        color: $uni-general-color-one;\n\n        .input {\n            background-color: #ffffff;\n            border-radius: #{50rpx 0 0 50rpx};\n            padding: 0 #{32rpx};\n            font-size: $uni-font-size-general-one;\n            height: #{64rpx};\n        }\n\n        .box {\n            position: relative;\n\n            .close-tip {\n                width: #{64rpx};\n                height: #{64rpx};\n                background-color: #ffffff;\n                border-radius: #{0 50rpx 50rpx 0};\n                margin-right: #{20rpx};\n            }\n\n            .search-close {\n                width: #{32rpx};\n                height: #{32rpx};\n                border-radius: 50%;\n                margin: #{16rpx};\n            }\n        }\n\n        .radio {\n            margin-top: #{32rpx};\n\n            .radio-item {\n                padding-bottom: #{12rpx};\n            }\n\n            .active {\n                border-bottom: #{4rpx} solid;\n            }\n        }\n    }\n\n    .history {\n        padding: #{36rpx} #{24rpx};\n        border-radius: #{16rpx} #{16rpx} 0 0;\n        background-color: #ffffff;\n        font-size: $uni-font-size-general-one;\n\n        .title {\n            padding-bottom: #{24rpx};\n            color: $uni-general-color-one;\n\n            image {\n                width: #{28rpx};\n                height: #{34rpx};\n                display: block;\n            }\n        }\n\n        .list {\n            .item {\n                height: #{64rpx};\n                background-color: #f7f7f7;\n                padding: 0 #{20rpx};\n                margin-right: #{20rpx};\n                margin-bottom: #{16rpx};\n                border-radius: #{32rpx};\n            }\n        }\n    }\n\n    .goods-list {\n        .no-result {\n            height: #{156rpx};\n            padding: #{28rpx} 0;\n            font-size: $uni-font-size-general-one;\n            background-color: #ffffff;\n\n            .text {\n                color: $uni-general-color-two;\n            }\n\n            .empty {\n                width: #{100rpx};\n                height: #{100rpx};\n                display: block;\n                margin-right: #{40rpx};\n            }\n        }\n    }\n    .u-loading-list {\n        height: 64upx;\n        line-height: 64upx;\n        text-align: center;\n        color: #b0b0b0;\n        font-size: 24upx;\n        background-color: #f7f7f7;\n    }\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=style&index=0&id=4cedc0c6&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=style&index=0&id=4cedc0c6&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1618142904249\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}